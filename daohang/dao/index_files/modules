_jsload_('mouse', 'g.Kb.zb({vM:"_docMsMov",bba:function(){var a=this.Sa.Yc;g.F.g(a,"mousedown",this.C3,this);this.Wna||g.l.ue||(this.zv=g.a.$C(this.zv,150,this),this.Wna=!0);this.V5();g.F.g(document,"mousedown",this.H3,this);g.F.g(document,"mouseout",this.zv,this);this.g(this.vM,this.v5,this);g.F.g(a,"mouseover",this.Vpa,this);g.F.g(a,"mouseup",this.D3,this);g.F.g(a,"contextmenu",this.YE,this);g.F.g(a,"rightclick",this.YE,this)},fma:function(){g.F.G(document,"mousemove",this.zv,this);g.F.G(this.Sa.Yc,"mousemove",this.eR, this)},V5:function(){g.F.g(document,"mousemove",this.zv,this);g.F.g(this.Sa.Yc,"mousemove",this.eR,this)},Vpa:function(){this.WF=!0},H3:function(){this.WF=!1},zv:function(a){if(!this.zg&&!this.Xg&&this.Sa){var b=this.wi(a,!0,!0);this.q(this.vM,{event:a,YI:b})}},Xfa:function(){var a=this.Sa.Yc;g.F.G(a,"mousedown",this.C3,this);g.F.G(document,"mousedown",this.H3,this);g.F.G(document,"mouseout",this.zv,this);this.G(this.vM,this.v5,this);g.F.G(document,"mousemove",this.zv,this);g.F.G(a,"mousemove",this.eR, this);g.F.G(a,"mouseup",this.D3,this);g.F.G(a,"contextmenu",this.YE,this);g.F.G(a,"rightclick",this.YE,this)},dba:function(){g.F.g(this.Sa.Yc,"mousewheel",this.B3,this)},$fa:function(){g.F.G(this.Sa.Yc,"mousewheel",this.B3,this)},cba:function(){this.g("mousemove",this.GZ);this.g("mouseout",this.HZ);this.g("mouseover",this.IZ);this.g("mouseup",this.JZ);this.g("mousedown",this.FZ);this.g("rightclick",this.LZ);this.g("contextmenu",this.xZ);this.g("rdblclick",this.MZ)},Zfa:function(){this.G("mousemove", this.GZ);this.G("mouseout",this.HZ);this.G("mouseover",this.IZ);this.G("mouseup",this.JZ);this.G("mousedown",this.FZ);this.G("rightclick",this.LZ);this.G("contextmenu",this.xZ);this.G("rdblclick",this.MZ)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.$aa():this.EN()},scrollWheelChanged:function(){this.get("scrollWheel")?this.g("mousewheel",this.KZ):this.G("mousewheel",this.KZ)},YE:function(a){g.F.preventDefault(a)},Pfa:function(a){var b=this.wi(a,!1,!0),c=0;"3D"==this.D.view.type? (this.na("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&g.a.Eh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c),0==c/120%1&&(c/=2)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.q1(a,b.Na,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&g.a.Eh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.V.lC=(this.V.lC||0)+c,this.q("mousewheel",b))},B3:function(a){"info"!=a.sf&&this.get("scrollWheel")&& this.Pfa(a)},hR:function(a,b){b=this.wi(a,!1,!0);if(!this.kv(b.tb,this.V.Zw)){var c=this.V;c.Zw=b.tb;if(c.Tq){if(!c.Pd&&(b.tb.x!==c.Ln.x||b.tb.y!==c.Ln.y)){var d;this.bN(c.wt)&&c.wt.get("draggable")&&(d=c.wt);!d&&this.get("dragEnable")&&(d=this);d&&(c.Pd=!0,c.Fp=d,c.Tf=c.Ln,c.Ep=c.PS)}c.Pd&&(c.Mj=b,b.button=a.buttons||a.button||0,this.WN())}}},yI:function(){var a=this.YI;g.j.ab(this.K,"amap-drag");g.j.Tna();g.j.m2();this.V&&(this.V.Pd=!1);this.zg&&!this.Xg&&this.q("moveend");this.V.bp&&(this.V.bp= !1,this.V.Fp.q("dragend",a));this.V.Tq=!1;this.V.Zw=null;this.V.Tf=null;g.F.G(document,"mousemove",this.hR,this);g.F.G(document,"mouseup",this.yI,this);try{g.F.G(window.parent.document,"mouseup",this.yI,this)}catch(b){}this.Sa&&(g.F.Hxa(this.Sa.Yc),this.V5())},Wpa:function(a,b){b=b||this.wi(a,!1,!1,a.srcElement);var c=this.get("size"),d;0<=b.tb.x&&b.tb.x<=c.width&&0<=b.tb.y&&b.tb.y<=c.height&&(d=!0);this.t4&&!d?this.q("mouseout",b):!this.t4&&d&&this.q("mouseover",b);this.t4=d},eR:function(a){if(!this.zg&& !this.Xg&&this.Sa&&(g.F.preventDefault(a),g.l.Vr&&(a=window.event),a)){a=this.wi(a,!1,!1,a.srcElement);var b=this.V,c=a.bd,d;if(c){this.V.Tq||(c instanceof g.w.sh?d=c.Yb.get("cursor"):c instanceof g.o.Tb&&(d=c.get("cursor")),d&&c!==this||(d=this.D.Ge.defaultCursor),d=this.D.get("optimalCursor")||d,this.K.style.cursor=d||"");d=b.pfa;var e=a.Ot;d!==e&&(d&&b.RY&&b.RY.q("mouseout",a),e&&c&&(c.q("mouseover",a),c.get("topWhenMouseOver")&&(c.Yb.C=!0,c.Yb.setTop(!0),c.Yb.C=!1)));a.bd.q("mousemove",a);a.bd!== this&&this.q("mousemove",a);b.pfa=a.Ot||null;b.RY=a.bd||null}}},C3:function(a){if("info"!=a.sf&&(this.WF=!0,g.j.kna(),g.j.Z1(),this.V.Zw=null,this.V.Tf=null,"info"!=a.sf)){var b=this.wi(a,!0,!1,a.srcElement);if(b.bd){this.V.d2=new Date;this.V.wt=b.bd;this.V.Ln=b.tb;this.V.lfa=b.button;this.V.Tq=!0;this.V.mfa=b;this.V.Pd||(this.V.PS=b);this.ve&&this.ve.stop();var c=b.bd;!c.Yb&&c.get("dragEnable")&&(this.V.Tq=!0);g.j.Ra(this.K,"amap-drag");c=!1;b.bd.q("mousedown",b);b.bd!==this&&(this.q("mousedown", b),c=b.bd.get("draggable"));c=c||this.get("dragEnable");g.F.Gva(this.Sa.Yc);g.F.g(document,"mousemove",this.hR,this);g.F.g(document,"mouseup",this.yI,this);try{window.parent.document&&g.l.Vr&&g.F.g(window.parent.document,"mouseup",this.yI,this)}catch(d){}g.F.stopPropagation(a);c&&this.fma()}}},v5:function(a){this.Wpa(a.event,a.YI)},HBa:function(a){this.hR(a.event,a.YI)},D3:function(a){this.YI=a=this.wi(a,!1,!1,a.srcElement);var b=a.bd;if(b){var c=this.D.get("allBubble")||b.get("bubble");b!==document&& (b.q("mouseup",a),a.bd!==this&&c&&this.q("mouseup",a));this.V.Ln&&this.kv(a.tb,this.V.Ln)&&(this.Kf&&this.kv(this.V.Ww,a.tb)&&a.button===this.V.lfa?(clearTimeout(this.Kf),this.Kf=null,g.F.z4(a)?c?(b.q("dblclick",a),b!==this&&this.q("dblclick",a)):b.q("dblclick",a):b.q("rdblclick",a),this.V.Ww=null):(g.F.z4(a)?(this.q("clickstart",a),c?(b.q("click",a),b!==this&&this.q("click",a)):(b.q("click",a),this.q("closeOverlays",a)),b.get("topWhenClick")&&(b.Yb.C=!0,b.Yb.setTop(!0),b.Yb.C=!1),this.q("clickend", a)):c?(b.q("rightclick",a),b!==this&&this.q("rightclick",a),this.q("contextmenu",a)):(b.q("rightclick",a),b.q("contextmenu",a)),this.V.Ww=a.tb,this.Kf&&clearTimeout(this.Kf),this.Kf=setTimeout(g.a.bind(function(){clearTimeout(this.Kf);this.Kf=null;this.V.Ww=null},this),260)))}}});g.Kb.zb({KZ:function(a){this.na("mousewheel",a);var b=this;if(1<=Math.abs(this.V.lC)&&!this.t9){var c=this.V.lC;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.qG(a.Na,c);this.V.lC=0;this.t9=!0;setTimeout(function(){b.t9=!1;b.V.lC=0},g.l.Iy?50:40)}},GZ:function(a){this.na("mousemove",a)},HZ:function(a){this.na("mouseout",a)},IZ:function(a){this.na("mouseover",a)},JZ:function(a){this.na("mouseup",a)},FZ:function(a){this.na("mousedown",a)},LZ:function(a){this.na("rightclick",a)},xZ:function(a){this.na("contextmenu", a)},MZ:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.qG(a.Na,-1);this.na("rdblclick",a)}});g.Kb.zb({Rea:function(){this.RA={left:[37],right:[39],NP:[40],rE:[38],Ci:[187,107,61],Di:[189,109,173]};this.Mba={left:this.vx(this.oG(100,0)),right:this.vx(this.oG(-100,0)),NP:this.vx(this.oG(0,-100)),rE:this.vx(this.oG(0,100)),Ci:this.vx(this.B0(1)),Di:this.vx(this.B0(-1))}},$aa:function(){this.get("keyboardEnable")&&(this.RA||this.Rea(),g.F.g(document,"keydown",this.mG,this),g.F.g(document,"keyup",this.tZ,this))},EN:function(){g.F.G(document,"keydown",this.mG,this);g.F.G(document,"keyup",this.tZ, this)},tZ:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},mG:function(a){var b=a.keyCode,c;for(c in this.RA)if(this.RA.hasOwnProperty(c))for(var d=0;d<this.RA[c].length;d+=1)if(b===this.RA[c][d]){if(!this.WF)return;if(!a.ctrlKey&&!a.shiftKey){this.Mba[c]();g.F.preventDefault(a);return}37===b?(this.ufa(),g.F.preventDefault(a)):39===b?(this.vja(),g.F.preventDefault(a)):38===b?(this.sia(),g.F.preventDefault(a)):40===b&&(this.ria(),g.F.preventDefault(a))}},vx:function(a){return function(){a()}}, ufa:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},vja:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},ria:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},sia:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},B0:function(a){var b=this.D;return function(){b.C=!0;1===a?b.zoomIn():b.zoomOut(); b.C=!1}},oG:function(a,b){var c=this.D;return function(){c.C=!0;c.panBy(a,b);c.C=!1}}}); ');_jsload_('vectorlayer', 'g.Tj={J8:function(){0===g.Da.xe&&g.Tj.K3()},kGa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].jk===b)return!0},Yla:function(a,b){var c="limg-"+a.key+"-"+b.h.dc;g.Da.rj[c]&&delete g.Da.rj[c]},K2:function(a){return g.Da.rj[a.jk?a.jk:a]},am:function(a,b){var c=null,d=null,e=!1,f=g.Da.rj;a.jk?(c=a,d=c.jk,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h){var e=function(a){this.zI(a);g.a.Eh(b)&&b(!0,{FI:a.target})},k=function(a){this.J3(a);g.a.Eh(b)&&b(!1, {FI:a.target})};if(a){var l="data:"===a.substr(0,5),h=document.createElement("img");l||(h.crossOrigin="Anonymous");f[d]=h;h.loaded=!1;g.Da.xe+=1;g.F.oj(h,"load",e,this);g.F.oj(h,"error",k,this);var m=this;h.xq=g.a.wf();l||void 0!==this.mP||(this.mP=setInterval(function(){if(0===g.Da.xe||0===g.Da.Cq.length)clearInterval(m.mP),m.mP=void 0;else{var a=g.a.wf(),b=g.Da.rj,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.xq&&(c=e.timeout=!0)}c&&m.K3()}},100));h.src=a; c&&(h.LAa=d)}}},K3:function(){for(var a=0;a<g.Da.Cq.length;a+=1)g.Da.Cq[a].set("display")},x1:function(a){g.F.G(a,"load",this.zI,this);g.F.G(a,"error",this.J3,this)},zI:function(a){a=a.target;a.loaded=!0;g.Da.xe-=1;this.x1(a);this.J8()},J3:function(a){a=a.target;a.loaded=!1;g.Da.xe-=1;this.x1(a);this.J8()}};g.o.Uh=g.o.Tb.extend({r:function(a,b,c){this.Dl=c;g.Da.Cq.push(this);this.dc=g.a.X2("layer");this.Za=2;a.get("textRatio");this.hV=25;this.W("tiles",a);this.Vxa=a.get("vdataUrl")||b.D.get("vdataUrl")||g.A.EK;this.pi=!0;this.U=a;this.rk=g.l.Z?!1:!0;this.e=b;this.Mi=this.Li=!0;this.Qe("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.Qe("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.W("lang", b,!0);this.get("watermark")&&(this.KK=new Image,this.KK.src=this.get("watermark"));this.CK="v4";this.ta={};this.Ll={};this.zd=256;this.ev=[];this.mf=this.Yf=0;this.ia=g.l.ia&&this.get("detectRetina");this.zd=256*(this.ia?2:1);this.W("mapStyle",b);this.W("style",b);this.Bp=0;this.W("features",b);this.We=18;this.W("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.ke=!!this.e.get("showBuildingBlock");this.featuresChanged()},featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload"); this.U.ys()},Zja:function(){var a=!1,b=this.$X();if(b){if(this.Ji){var c="active"===this.Ji.JA;b.nA(this.Ji);c&&(b.qt(this.Ji,"active"),a=!0)}g.l.Sla&&!a&&b.NG()}},fA:function(){this.Zja()},lE:function(a,b){var c=!0;if("hotspotout"===a)this.e.D.set("optimalCursor",null);else if("hotspotover"===a)this.e.D.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.$X();if(d)switch(a){case "hotspotout":d.SG(b);break;case "hotspotover":d.qt(b,"hover");break;case "mouseup":d.qt(b, "hoverup");break;case "mousedown":d.qt(b,"active")}c&&(c=b.wa,c=new g.H(c[0],c[1]),c=this.e.Qd(c,3),this.e.D.q(a,{name:b.name,lnglat:c,id:b.qs,isIndoorPOI:b.v4}))},$X:function(){if(!g.l.W3){var a=this.N||this.$f;if(!a)return null;var b=this.e?this.e.D.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.xB||(this.xB=new g.o.Uh.T$(a));return this.xB}},Wq:function(a){(a=this.g3(a))&&this.lE("hotspotclick",a)},ex:function(a){var b="mousemove"===a.type;if(!this.e.Xg||!b){var c= this.g3(a);c&&c.$l||(c=null);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.Ji!==c&&(this.Ji&&this.lE("hotspotout",this.Ji),this.lE("hotspotover",c)),!c&&this.Ji&&this.lE("hotspotout",this.Ji),c&&!b&&this.lE(a.type,c)}this.Ji=c}},textIndexChanged:function(){this.set("display")},cta:function(){this.e.g("click",this.Wq,this);this.e.g("mousemove",this.ex,this);this.e.g("mousedown",this.ex,this);this.e.g("mouseup",this.ex,this)},qP:function(){this.e.G("click",this.Wq,this);this.e.G("mousemove", this.ex,this);this.e.G("mousedown",this.ex,this);this.e.G("mouseup",this.ex,this)},qo:function(){return null},te:function(){var a=this.Qu?null:this.e.D.get("forceZooms");return{pi:!0,zd:256,visible:this.get("visible"),lb:a||this.get("zooms"),mH:this.rk&&this.Ja,Li:!this.e.sK,Mi:!this.e.sK,opacity:this.get("opacity"),Mc:!1,hd:this.mo()}},Gl:function(a){if(g.N.canvas.Uh)return new g.N.canvas.Uh(this,a)},UB:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")||g.l.Z&& !this.ia?"6":"5";this.url=g.A.Cc+"://"+this.Vxa+"/tiles?mapType="+a+"&v="+(g.Je?3:2)+"&style="+b;this.url+=this.ia?"&rd=2":"&rd=1";this.url+="&flds="+this.ha;this.url+="&t="},styleChanged:function(){this.e.od||this.featuresChanged()}}); g.o.md=g.o.Uh.extend({Gl:function(a){var b=this;if(!b.KK&&g.l.xf&&"vw"===b.e.get("baseRender")){var c=["wgl"];this.e.od&&c.push("wgl2");if(g.qb.WC(c))return new g.N.Ne.md(b,a)}else if(c=["cgl"],this.e.od&&c.push("cgl2"),g.qb.WC(c))return new g.N.canvas.md(b,a);g.qb.Lg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.Dl:a&&(-1!==g.a.indexOf(a,"bg")&&-1!==g.a.indexOf(this.Dl,"region")&&b.push("region"),-1!==g.a.indexOf(a,"building")&&-1!== g.a.indexOf(this.Dl,"building")&&b.push("building"),-1!==g.a.indexOf(a,"road")&&-1!==g.a.indexOf(this.Dl,"road")&&b.push("road"));this.ha=b;this.UB(this.get("mapStyle")||"normal");this.set("reload")}});g.o.gaa=g.o.md.extend({r:function(){this.ph(arguments);this.We=this.Ao=17;this.ha=["building"];this.ke=!0;this.UB(this.get("mapStyle")||"normal");this.Qu=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.o.Bj=g.o.Uh.extend({Gl:function(a){this.Jg=!0;var b=this;if(this.xR()){if(this.zz=!0,g.N.canvas.uL)return this.f1(),a=new g.N.canvas.uL(this,a),a.g("afterLabelRender",this.fA,this),a}else{b.zz=!1;if(g.N.canvas.tL)return a=new g.N.canvas.tL(this,a),a.g("afterLabelRender",this.fA,this),a;g.qb.Lg(["labelcanvas"],function(){b.set("display")})}},xR:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")?!1:g.l.zz?!0:!1},nqa:function(){var a=this.get("mapStyle"); return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")||g.l.Mc||g.l.Z?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.a.indexOf(a,"point")&&c.push("poilabel"));a=this.xR();c.length&&(a||this.nqa())&&c.unshift("limg");this.ha=c;this.UB(b);this.set("reload");(b=this.N||this.$f)&&a^this.zz&&(this.xB&&(this.xB=this.xB.N=null),b.G("afterLabelRender",this.fA, this),b.Lj(),this.$f=this.N=null)},f1:function(){this.Wu=g.A.Cc+"://"+(this.U.get("vdataUrl")||this.e.D.get("vdataUrl")||g.A.EK)+"/limg?";var a=this.ia?2:1;this.Wu+="&font="+(g.l.Z&&!this.ia?"big":"small");this.Wu+="&scl="+a;this.Wu+="&t="},g3:function(a){return a.Uf?(a=this.S2(this.e.hc(a.Uf,20),!0))?a[0]:null:null},S2:function(a,b){var c=this.e.nI();if(c&&(c=c.Du(this)))return c.ko(a,b)}});g.o.Uh.T$=g.aa.extend({r:function(a){this.Eja(a)},Eja:function(a){this.N=a},SG:function(a){if(a.JA){a.JA=!1;var b=this.N;b&&b.SG.apply(b,arguments)}},nA:function(a){a.JA=!1;var b=this.N;b&&b.nA.apply(b,arguments)},qt:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.JA!==b){a.JA=b;var c=this.N;c&&c.qt.apply(c,arguments)}},NG:function(){var a=this.N;a&&a.NG()}});g.o.xw=g.aa.extend({r:function(){this.Za=2;this.hV=g.l.El?16:12;this.uva={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.Hv=[new g.dg,new g.dg,new g.dg,new g.dg,new g.dg,new g.dg,new g.dg];this.Xxa=[{type:"roadlabel",show:!0,oi:1},{type:"poilabel",show:!0,oi:1},null,{type:"region",show:!0,oi:0},{type:"road",show:!0,oi:0},{type:"building",show:!0,oi:0},null];this.Bp=0},Nx:function(a,b,c,d,e){if("first"!==b){c&&(c.Ed=d);var f;switch(e){case "roadlabel":f=0;break;case "poilabel":f=1;break;case "labels":f= 2;break;case "region":f=3;break;case "road":f=4;break;case "building":f=5;break;case "allbase":f=6}d=this.Hv[f].Fxa;c&&c.we&&(d=this.Hv[f].push);"groupcomplete"===b?d.call(this.Hv[f],["groupcomplete",f,c,a]):"tileComplete"===b?d.call(this.Hv[f],["co",7,c,a]):(d.call(this.Hv[f],["co",f,c,a]),""!==b&&d.call(this.Hv[f],[b,f,c,a]));this.Bp>f&&(this.Bp=f);this.mwa()}},k6:function(){var a=new Date,b=!1;do if(b=this.parse(),new Date-a>=this.hV)break;while(!b);this.c6=b?null:g.a.Qc(this.k6,this)},mwa:function(){this.c6|| (this.c6=g.a.Qc(this.k6,this))},Lma:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.Bp,d=this.Hv[this.Bp];if(d.Qk())6===c&&(b=!0),this.Bp=(this.Bp+1)%7;else{a=d.Asa();var e=a[3],f=e.ia?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2];if(e.ta.Wc(h.key))if("co"===a[0])if(3===a[1])this.QS(e,h,f),h.qa.region&&e.Xa.SJ(h.qa.region,0,h.ra.z);else if(4===a[1])this.QS(e,h,f),h.qa.road&&e.Xa.a7(h.qa.road,h.ra.z);else if(5===a[1]&&h.qa&&h.qa.building)a= g.yj&&g.yj.u4(e.e.D),e.ke?h.ff=h.qa.building:(this.QS(e,h,f),e.Xa.SJ(h.qa.building,1,h.ra.z,void 0,a));else{if(7===a[1]){h.Ke&&(e.KK&&0===(h.ra.x+h.ra.y)%2&&h.Ke.getContext("2d").drawImage(e.KK,0,0),h.Wka=!0,g.l.SC&&(f=new Image,f.src=h.Ke.toDataURL(),h.Ke=f));if(h.gn){h.gn.Re=null;h.yi=null;f=e.e.Bc;if(e.$f&&f.$f){c=f.$f.oH(f.$f.ga,h.gn);c.dc=f.$f.dc;f={Qi:c,tagName:"CANVAS",width:h.gn.width,height:h.gn.height};c=0;for(a=h.ha.length;c<a;c+=1)for(var k=h.ha[c],l=0,m=k.Da.length;l<m;l+=1)k.Da[l]== h.gn&&(k.Da[l]=f);h.ha.Jwa=!0}h.gn=null}h.Bsa||(h.Ja=h.xa=!0);e.set("display")}}else g.p$.Dta(h,a[0],this.Xxa[a[1]].type,e)}d.Qk()&&(6===c&&(b=!0),this.Bp=(this.Bp+1)%7)}return b},QS:function(a,b,c){a.Xa||(a.Xa=new g.N.canvas.md.$c(a),a.Xa.J=a.e.J);var d=1;18==b.ra.z&&(d=a.U.get("map",null,!0).get("zooms")[1],d=Math.pow(2,18-d));b.Ke||(b.Ke=this.Lma(),b.Ke.width=b.Ke.height=c/d,b.Wka=!1);b.Ke&&(a.Xa.Qa=b.Ke,a.Xa.sg=d,a.Xa.Kc=1/d)}});g.o.xw.ni=new g.o.xw;g.ww={RB:function(a,b){this.e.D.Qp&&(this.gg={},this.gg.bDa=g.a.ub(this.gg),b.Dc||(b.Dc=g.HV()),this.Dc=b.Dc,this.Dc.g("tiles",this.rD,this),this.Dc.g("ack",this.qD,this),this.Dc.g("disable",this.oD,this))},Exa:function(){this.e.D.Qp&&(this.gg=null,this.Dc&&(this.Dc.G("tiles",this.rD,this),this.Dc.G("ack",this.qD,this),this.Dc.G("disable",this.oD,this),this.Dc=null))},ux:function(){if(!1===this.e.D.get("workerMode"))return!1;g.pk.j4||this.vY(g.pk);g.zc.j4||(this.vY(g.zc),g.zc.CR&&z.event.yx(this.e.D, "complete",function(){g.zc.CR()}));if(this.Jg&&!this.vo&&g.pk.Zxa||this.vo&&g.pk.qra||!this.vo&&!this.Jg&&this.pi&&g.zc.f4)return!0},vY:function(a){a.jf(null,{Je:g.Je});a.j4=!0},Bfa:function(a){g.a.Rb(a,function(a){g.Tj.am(a)})},Ry:function(a){if(this.h&&a.VR===this.h.dc){this.Ze||this.Mg?this.iB([this.h,"groupcomplete",null,null,"allbase"]):(this.Nj(),this.Sn.Nx(this.h,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Ic.length;b<c;b+=1)this.sD(a.Ic[b],a.Ey,a.gq,a.Z)}},sD:function(a,b){var c= a.vd,d=this.ta.get(a.Ai);if(d){var e=this.h.ha,f="";(this.e.gm&&!this.e.od||this.Lqa&&this.e.od)&&this.mQ(c,a.Ma,a.tg.z);"poilabel"===c||"roadlabel"===c?(a.qd||(f=a.Ma,a.qd=null),d.ha||(d.ha=[]),d.ha.push.apply(d.ha,a.Ma),c===this.h.ha[this.h.ha.length-1]&&(d.qd=null)):d.qa[c]=a.Ma;"building"!==c&&"poilabel"!==c||!a.dn||d.ae||(d.ae={},d.ae.ff=a.dn,g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:d}));if("roadlabel"!==c&&"poilabel"!==c||this.o4||!g.l.g2&&!this.e.od)this.Ze||this.Mg?this.iB([this.h,f,d,b, c]):(this.Nj(),this.Sn.Nx(this.h,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Ze||this.Mg?this.iB([this.h,"tileComplete",d,b,c]):(this.Nj(),this.Sn.Nx(this.h,"tileComplete",d,b,c)))}},qF:function(){if(this.e){var a=this.e.D.getMapStyle();this.gs=a;this.ffa(a);this.Dc&&this.Dc.D4()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:g.l.Z&&!this.h.ia?"6":"5",rd:this.h.ia?2:1}},this.ux()?(g.zc.Cla(a,g.a.ns),this.Dc.lDa()|| this.Dc.close()):this.Dc.send(a))}},mapStyleChanged:function(){this.qF()},styleChanged:function(){this.qF()},oD:function(){for(var a in this.gg)this.gg.hasOwnProperty(a)&&this.gg[a].Eb&&(this.tl(this.gg[a].Eb,this.gg[a].Ed),delete this.gg[a]);this.Dc=null;this.hl("mapStyle");this.set("display",1)},qD:function(a){var b=a.reqId;this.gg[b]&&(!a.content.status&&this.gg[b]&&this.tl(this.gg[b].Eb,this.gg[b].Ed),delete this.gg[b])},rD:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.uB())&&this.gg[b]){var c= a.content.opt,d=this.gg[b].Eb[0];c!==this.bb&&!d.we||d.we&&2<(this.uB()||Math.abs(c-this.bb))?this.tl(this.gg[b].Eb,this.gg[b].Ed):this.ps(a.content.data,c)}},C0:function(a,b){if(g.Aj){var c=a.uf,c={"x-vd-v":c.Se,tv:c.Dh,bgc:this.e.pe,vdataVersion:c.Df,url:this.fy(a.Ed,[]),o:this.h,ke:this.e.D.get("showBuildingBlock")};b?a.Eb.length&&(c.qd=!0,c.data=g.a.map(a.Eb,function(a){return{key:a.key,data:JSON.stringify({key:a.key,qd:a.qd,ha:a.ha,ae:a.ae})}})):this.HU||(c.xf=!!this.mj,c.Ic=this.mj||this.pi? a.cu:a.data.Ic);g.Aj.set(c)}},bS:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(this.Jg&&"zh_cn"!==this.lang)for(var d=0;d<a.length;d+=1)a[d].status="loaded",a[d].xa=!0;else{var e=[],f=this;this.Gia(a,b,g.a.bind(function(a,d){var f=this;if(d.length){for(var m=0,n=d.length;m<n;m++){var p=d[m].ra,q=p.x,r=p.y,p=p.z;if(10>p){var s=Math.pow(2,p);if(q>=s||0>q)q=(q+s)%s}q=g.a.OH(q,r,p).join(",");g.a.ja(e,q)||e.push(q)}if(this.ux())if(m=this.rda({Qwa:d,we:c,Ed:b,xq:e}),m.IAa= (new Date).getTime(),this.Jg)g.pk.kh(m,function(a,c){if(f.e)if(c.C4){var d=c.Eb.map(function(a){return f.ta.get(a.key)}).filter(function(a){return a});f.tl(d,b)}else c.Rk&&f.EG(),f.vo?(g.a.Rb(c.Eb,function(a){this.ta.set(a.key,a);a.qd&&!a.qd.loaded&&(g.Tj.am(a.qd),a.qd.loaded=!0);a.ae&&a.ae.ff&&g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:a})},f),f.set("display"),f.C0(c,!0)):(g.a.Rb(c.Eb,function(a){var b=this.ta.get(a.key);b&&(b.status=a.status,a.L&&a.L.Da&&this.Bfa(a.L.Da))},f),c.data&&f.Ry(c.data))}); else{var u=g.zc.c5;this.e.D.Ja&&!g.zc.lna&&this.e.D.Qp||(u=g.zc.kh);this.qF();u(m,function(a,c){if(f.e){if(c.C4){var d=c.Eb.map(function(a){return f.ta.get(a.key)}).filter(function(a){return a});f.tl(d,b)}if(u===g.zc.c5){if(c.disabled){g.zc.lna=!0;f.set("display");return}if(c.oka)return}c.Rk&&f.EG();c.data&&(f.e.pe!==c.$t&&(f.e.pe=c.$t),g.a.Rb(c.Eb,function(a){var b=this.ta.get(a.key);b&&(b.status=a.status)},f),f.C0(c),c.data&&f.Ry(c.data))}})}else!this.Jg&&this.Dc&&this.Dc.D4()?this.e.D.get("workerMode")? this.eG(d,b,e,c):(1>this.Dc.wa.length||3<this.Lt?this.eG(d,b,e,c):((2===this.Dc.wa.length||this.Dc.MI())&&this.qF(),this.Dfa(d,b,e,c)),this.Dc.xFa(this.Dc.wa.length+1),this.Dc.Q4&&this.Dc.OAa(Math.ceil((new Date-this.Dc.Q4)/1E3)),this.Dc.Q4=new Date):this.eG(d,b,e,c)}},this));window.renderDelay&&(this.QJ=setTimeout(function(){f.jJ&&f.set("display",!1);f.jJ=!1;f.QJ=null},window.renderDelay))}},ffa:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.HU=!0:this.HU=!1},Gia:function(a,b, c){var d=g.Aj;if(d&&!this.HU&&18>=b){var e=this,f=this.e,h=f.D;f.ZC||void 0!==f.WI||("dv"===h.get("baseRender")?f.WI=1:f.WI=2);d.get({type:h.Ja?"NFS":"FS",ke:this.h.Qu||this.h.ke,Lwa:a,xf:!!this.mj,o:this.h,url:this.fy(b,[]),timeout:1E3},function(d,h){if(e.h){if(d)return c(null,a);h.t5.length&&c(null,h.t5);if(h.qR.length)if(h.qR.length===a.length&&(f.ZC&&(f.WI--,e.EG()),e.e.D.Ja||e.Jg||e.TC||e.e.iT()),h.Ic){e.Se=h.uf["x-vd-v"];e.Dh=h.uf.tv;var m=h.uf.bgc;e.e.pe!==m&&(e.e.pe=m);g.a.forEach(h.qR,function(a){a.status= "loaded"});e.g6(h.Ic,b)}else h.Y4&&(g.a.forEach(h.Y4,function(a){var b=e.ta.get(a.key);if(b){b.status="loaded";b.ae=a.ae;if(a.qd){b.qd=a.qd;b.ha=a.ha;var c="limg-"+a.key+"-"+e.h.dc;b.qd.jk=c;b.ha&&(g.a.forEach(b.ha,function(a){a.Da&&g.a.forEach(a.Da,function(b,d){b&&0===b.indexOf("limg-")&&(a.Da[d]=c)})}),g.Tj.am(b.qd),b.qd.loaded=!0)}b.ae&&b.ae.ff&&g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:b});b.xa=b.Ja=!0;e.ta.set(a.key,b)}}),e.set("display"))}})}else c(null,a)},Dfa:function(a,b,c,d){if(!d||!this.uB()){var e= [(new Date).getTime(),this.Dc.wa.length+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.h.ha.join(","),v:g.Je?"3":"2"}}},h;if(!this.Dc.MI()){var k=this;setTimeout(function(){k.Dc&&!k.Dc.MI()&&(k.Lt?k.Lt++:k.Lt=1,k.Dc.Mna(h)&&(delete k.gg[e],k.eG(a,b,c,d)))},300)}h=this.Dc.send(f);this.gg[e]={Eb:a,Ed:b}}},tS:function(a){if(!a.Ja||a.we)a.status="",a.Ja=void 0,a.xa=null,a.Ke=null,this.ta.Sv(a.key)},rda:function(a){var b=a.Qwa,c=a.Ed,d=a.xq;a=a.we;var e=+new Date+ "_"+Math.random();return{dc:e,$t:this.e.pe,od:this.e.od,Jg:this.Jg,vo:this.vo,ke:this.h.ke,Mqa:!!g.Je,Bi:this.J.type,xf:this.mj,UR:this.h.dc,ha:this.h.ha,Mc:this.h.ia,Za:this.h.Za,dR:Math.ceil(this.Yj.oy),Eb:g.a.filter(b,function(a){return"loaded"!==a.status}),Ed:c,xq:d,we:a,url:this.fy(c,d,b)+"&_id="+e,nh:this.UX(c,[]),PDa:this.e.D.Ja}},UX:function(a,b){return{FR:"3D"===this.J.type,bP:this.h.ke,or:g.A.or||null,eBa:this.h.get("businessIconsID"),Se:this.Se,od:this.e.od,Dh:this.Dh,aDa:this.h.get("iconsID"), VR:this.h.dc,Ey:a,ry:this.h.ry,Vf:!this.h.mo()&&this.h.U.get("merge"),Ic:b,Z:this.h.get("forceBig")||g.l.Z,Bi:this.J.type,mode:this.h.get("mode"),mua:g.A.Cc,e7:this.h.get("forceBig")?1:this.h.Za,gq:this.h.get("forceBig")?!1:this.h.ia,Bx:this.h.get("forceBig")||g.l.Z&&!this.h.ia?1:0}},tA:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},g6:function(a,b){if(a.length){var c=this,d=null;this.mj?(d= g.zc,d=d.parseDataToWebGL):d=this.Jg?g.pk.parseLabel:g.zc.parseDataToVector;var e=c.UX(b,a);e.Je=g.Je;d(e,function(a,b){if(c.h&&!a){var d=b.icons;if(d)for(var e=0;e<d.length;e+=1)g.Tj.am(d[e]);b.data&&c.Ry(b.data)}})}},ps:function(a,b,c){if(this.h){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Se=h["x-vd-v"],this.Dh=h.tv,this.Df=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.e.pe!==h&&(this.e.pe=h))):this.pD(h,b,d))}this.g6(d,b)}},pD:function(a, b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.mj&&(e+="/"+b);if((d=l.ta.get(e))&&"loaded"!==d.status)if(l.w8(d,p)||d.we){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.qd=e,"string"===typeof e.b&&(e.b=l.tA(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,jk:"limg-"+d.key+"-"+l.h.dc},e.u=d,g.Tj.am(d)}else{e={tg:d.ra,Ai:e,Ma:a,vd:m,ry:l.h.ry,Ex:l.e.pe,TC:"building"===m,oi:"poilabel"===m||"roadlabel"===m||"building"===m&&l.h.ke};if("poilabel"===m||"roadlabel"===m)e.qd=d.qd;m===n[n.length- 1]&&(d.status="loaded");c.push(e)}}else l.LT(b,d,p,g.a.bind(l.tS,l))}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.h.ha,p=18<b?Math.pow(2,b-18):1,e=l.Yj.oy,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},iB:function(a){this.Rt||(this.Rt=[]);this.Rt.push(a)},Nj:function(){if(this.Rt&&this.Rt.length){for(var a=0,b=this.Rt.length;a<b;a+=1)this.Sn.Nx.apply(this.Sn,this.Rt[a]);this.Rt=[]}},tl:function(a,b){for(var c=18<b?Math.pow(2, b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.LT(b,e,c,g.a.bind(this.tS,this));18<b&&this.ta.Sv(e.key+"/"+b)}g.Aj&&g.Aj.Sv({Eb:a,url:this.fy(b,[]),o:this.h,xf:!!this.mj,ke:this.h.ke})},fy:function(a,b,c){return this.h.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].we?1:0)},Yda:function(){var a=this.h.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},EG:function(){this.e.ZC||g.oe.$e.end({key:this.Yda(),index:0,id:this.e.D.id})},eG:function(a,b,c){function d(a,c){var d= a.split("|");d[0]=c+d[0];var e=d,f="";d[d.length-1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.ps(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.OD=[(new Date).getTime(),e?1:0].join("-");var e=this.fy(b,c,a),h=0,k=this;f.dq="";f.onreadystatechange=function(){if(k.h&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status;b!==k.bb&&c&&!f.it?(f.it=!0,k.tl(a,b),f.onreadystatechange="",c||f.abort()):f.it||(3===f.readyState?(c=f.responseText.substring(h), f.dq=d(c,f.dq),h=f.responseText.length):4===f.readyState&&(k.EG(),c=f.responseText.substring(h),k.Jg&&(c+="|"),d(c,f.dq),f.dq="",k.e.D.Ja||g.oe.$e.push({id:k.e.D.id,key:"ds",rf:f.responseText.length/2})))}};f.onerror=function(){};this.Xpa||(this.Xpa=1);f.open("GET",e,!0);f.send()},w8:function(a,b){var c=this.aw||this.Yj,d=a.ra.x,e=a.ra.y;return d>Math.floor(c.Hc/b)||d<Math.floor(c.Jc/b)||e>Math.floor(c.vc/b)||e<Math.floor(c.fc/b)?!1:!0},LT:function(a,b,c,d){d(b)}};g.N.canvas.Bj=g.N.Gi.extend({ja:[g.ww],r:function(a,b){arguments.callee.ka.apply(this,arguments);this.dc=g.a.ub(this);this.Cn=300;this.We=a.We;this.Jg=this.pi=!0;this.W("mapStyle",a.e);this.W("style",a.e);this.vo=!0;this.ox=1;var c=this;this.nY=function(){c.D5=!0;c.set("display",0)};this.Gg();this.YR(a)},YR:function(a){a=g.l.Z||a.ia?"big":"small";var b=g.A.Cc+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";g.Tj.am(g.A.Cc+"://vdata.amap.com/style_icon/icon-normal-"+a+".png");g.Tj.am(b)},uA:function(a){g.Tj.Yla(a, this);var b=g.N.canvas.Bj.Sc.uA;b&&b.apply(this,arguments)},Gg:function(){this.Cm=document.createElement("canvas");this.Cm.className="amap-labels";this.Cm.draggable=!1;this.Cm.y4=!0;this.wk=this.Cm.getContext("2d",{alpha:!0});this.R4=[];this.Rr=10},sv:function(a){var b=Math.pow(2,a.R.zoom-this.ze),c=this.h.ia?this.h.Za:1,d=a.R.nb.$a(this.as).dd(this.sg);this.transform={translate:this.transform.translate.add(d.Gd(c)),scale:b/c,rotate:0};this.nb=a.R.nb},$y:function(a,b){this.Ka=this.J.Ka;this.he=!1; this.currentTime=+new Date;this.JU=b.JU;this.Yd=[this.Ga.Zb.x,this.Ga.Zb.y];this.rk=b.mH;var c=this.Tg;this.Ze=this.zoom<<0!==this.zoom;var d=this.nb.$a(this.Ka);d.x<-g.a.Ca/2&&(d.x+=g.a.Ca);d.x>g.a.Ca/2&&(d.x-=g.a.Ca);this.hP=d.dd(this.sg);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].ra.z,h=!1;if(e.ig&&!g.Da.xe&&("stable"==this.Ff||f<=this.zoom&&"zoomIn"===this.Ff||f>=this.zoom&&"zoomOut"===this.Ff)&&(!this.labels||!this.labels.length||this.TI||a.Tk||!this.FD(this.labels.el,this.Yj)|| this.GI(a)||this.Qf!==a.Qf)){h=!0;h=[];a.Qf&&(h.push.apply(h,a.Qf),this.Qf=a.Qf);a.wb.length?(h.push.apply(h,a.wb),this.st=a.wb.dP):this.st=null;for(var k=e.length-1;0<=k;k-=1){var l=e[k],m=!1,n=l.ha;!n&&l.Sb&&l.Sb.ha&&(n=l.Sb.ha,m=!0);if(n)for(var p=0,l=n.length;p<l;p+=1){n[p].reverse=m;var q=!1,r=n[p].wa;this.st&&g.a.Rb(this.st,function(a){!q&&g.wd.Nd(r,a.zf[0].wa)&&(q=!0)});q||h.push(n[p])}}e=[];k={};if(h.length)for(m=0,l=h.length;m<l;m++)h[m].id in k||(k[h[m].id]=1,e.push(h[m]));e.zoom=f;this.hS(e); e.sort(function(a,b){return a.zIndex!==b.zIndex?a.zIndex>b.zIndex?-1:1:!a.Be^!b.Be?a.Be?1:-1:a.Be==b.Be?a.id==b.id?a.Le==b.Le?a.name<b.name?-1:1:a.Le>b.Le?-1:1:a.id<b.id?-1:1:a.Be>b.Be?-1:1});this.labels=e;this.labels.el=this.Yj;this.TI=!1}}}if(this.kP(a)){this.Md();if(!this.e.D.Ja)return;this.oT(a);this.hh=this.labels}this.D5=!1;this.De(a)},hS:function(a){this.labels&&this.labels.opacity||(this.labels=[],this.labels.opacity={});for(var b={},c=0;c<a.length;c+=1){var d=a[c].id;d&&(d in this.labels.opacity? (b[d]=this.labels.opacity[d],delete this.labels.opacity[d]):b[d]=0,a[c].jj=!0)}for(var c=0,e=this.labels.length;c<e;c+=1)d=this.labels[c].id,this.labels.opacity[d]&&(a.push(this.labels[c]),b[d]=this.labels.opacity[d],this.labels[c].jj=!1);a.opacity=b},Md:function(){if(this.ig&&!this.h.Ja){var a=this.h;g.oe.$e.end({id:this.e.D.id,key:"rl",index:2});a.Ja=!0;a.Dd?a.na("renderComplete"):(a.Dd=!0,a.na("complete"))}},kc:function(a,b){this.lang=a.lang;this.gs=a.gs;this.Zs=a.Zs;this.Ho(a,b);this.Ze||this.Nj(); this.as&&(a.D8||a.lU&&g.l.El||a.Mg&&!a.Ze&&a.cla)?this.sv(a,b):this.$y(a,b);this.as=this.nb;this.he&&this.set("display",0);this.TR=this.Ff},De:function(a){var b=this.nb.$a(this.Ka);b.x<-g.a.Ca/2&&(b.x+=g.a.Ca);b.x>g.a.Ca/2&&(b.x-=g.a.Ca);this.transform={translate:new g.H(a.R.Ga.tc.x*(this.h.ia?this.h.Za:1),a.R.Ga.tc.y*(this.h.ia?this.h.Za:1)),scale:1/(this.h.ia?this.h.Za:1),rotate:0}},FD:function(a,b){return a.fc===b.fc&&a.Jc===b.Jc&&a.vc===b.vc&&a.Hc===b.Hc},ko:function(a,b){var c;if(this.zoom){var d= a.dd(Math.pow(2,20-this.zoom));this.labels&&(c=this.Zoa(d,b))&&(c.v4=!1);!c&&this.wb&&(c=this.Yoa(d))&&(c.v4=!0)}return c?[c]:[]},Zoa:function(a,b){for(var c=a.x,d=a.y,e=this.labels.DDa||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.wa[0]/this.S,l=h.wa[1]/this.S;if((h.qs||!b)&&this.r4(h,c,d,k,l))return h}},Yoa:function(a){var b=a.x;a=a.y;for(var c=this.wb.length-1;0<=c;c-=1){var d=this.wb[c],e=d.wa[0]/this.S,f=d.wa[1]/this.S;if(d.qs&&this.r4(d,b,a,e,f))return d}},r4:function(a,b,c,d,e){for(var f= 0;f<a.Ta.length;f+=1){var h=a.Ta[f][2],k=a.Ta[f][3],l=a.Ta[f][0],m=a.Ta[f][1];this.h.ia&&(h/=this.h.Za,k/=this.h.Za,l/=this.h.Za,m/=this.h.Za);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.h&&(this.h.Ja=!1);this.ta.count&&(this.ta.clear(),g.Aj&&g.Aj.clear());this.labels=[];this.R4=[];this.Lb&&this.Lb.parentNode&&this.Lb.parentNode.removeChild(this.Lb);this.Cm&&this.Cm.parentNode&&this.Cm.parentNode.removeChild(this.Cm);this.set("display")},hj:function(){return this.Cm}, mQ:function(a,b,c){if("roadlabel"===a||"poilabel"===a)for(a=0;a<b.length;a+=1){var d=b[a];if(d.sc){var e="",f="",h="";d.ld&&(h=d.ld[0],e=h[3],f=h[4],h=d.lj?"":h[7]);if(e=this.J.hy&&this.J.hy(e,f,h,d.sc,d.ou,c))d.visible=e[4],d.ek=e[3];if(d.ld)for(f=0;f<d.ld.length;f+=1)h=d.ld[f],h[3]=e[0],h[4]=e[1],d.$l&&(h[7]=e[2])}}}});g.vL={fy:function(a,b,c){return this.h.Wu+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].we?1:0)},ps:function(a,b){if(this.h){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Se=h["x-vd-v"],this.Df=[h.tv||"",h.vdv].join("-"),this.Dh=h.tv,this.e.pe="#"+h.bgc.substring(2)):(h=this.pD(h,b,c,this.Se||"v4"))&&d.push(h))}this.set("display")}},Wy:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.S;return[(c+a[0])*e,(d+a[1])*e]},pD:function(a,b,c,d,e){function f(c, f,m){c=[m,c,f].join("/");if(c=q.ta.get(c)){f=c.ra;var n="3D"==q.J.type?0:-3;if(c&&"loaded"!==c.status)if(q.w8(c,u)||c.we){if(-1!==s.indexOf(r))if("limg"===r)a[1]&&(c.qd={url:"data:image/png;base64,"+a[1],jk:"limg-"+c.key+"-"+q.h.dc},g.Tj.am(c.qd));else{if("roadlabel"===r)for(var p=1;p<a.length;p+=1){var x=a[p],A=g.a.Rv(x[1],d);if(!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){var B=q.Wy(A,f),A={margin:0,z:m,zIndex:9E3,wa:B,name:x[0],lj:!0,Na:A,Da:[],Ta:[],visible:!0,ek:!0};A.id="roadlabel_"+g.a.ub(A);A.jq= 15>x[2]%90||75<x[2]%90?90*Math.floor((x[2]+15)/90):x[2];B=x[3];0<=x[8]&&(A.yG={name:x[6],q8:x[7],dir:x[8]});var G=B[2],H=B[3],n=-Math.floor(H/2);if(x[4]){A.Tu=!0;var I=x[5].split(":"),M=I[1],M=parseInt(M)-1,I=g.A.Cc+"://vdata.amap.com/style_icon/icon-normal-"+(k||l?"big":"small")+".png";A.Da.push(I);var I=Math.floor(M/10),L=M%10,O=0,K=0,D=0;l?(O=48,D=K=40):k?(O=K=40,D=36):(O=K=24,D=20);var Q=O*Math.max(G+2,D)/D,I=[-Q/2,-O/2,Q,O,K*L,K*I,K,K];A.Le=7;A.Ta.push(I)}A.Da.push(c.qd.jk);A.Le=11;A.Ta.push([-Math.floor(G/ 2),n,G,H,B[0],B[1],B[2],B[3]]);c.ha||(c.ha=[]);c.ha.push(A)}}else if("poilabel"===r){for(var P=[],p=1;p<a.length;p+=1)if(x=a[p],A=g.a.Rv(x[1],d),!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){B=q.Wy(A,f);A={id:x[4],margin:n,zIndex:9001,wa:B,name:x[0].replace("^",""),$l:!0,Na:A,Da:[],Ta:[],visible:!0,ek:!0};A.id||(A.id="poilabel_"+g.a.ub(A));M=0;A.Be=x[8];x[6]&&(I=x[6].split(":"),M=I[1],H=Math.floor((parseInt(I[0].split("_")[1])-28)/2));if(M&&x[3]){I=g.A.Cc+"://vdata.amap.com/style_icon/icon-"+(1===H?"biz-": "normal-")+(k||l?"big":"small")+".png";A.Da.push(I);M=parseInt(M)-1;I=Math.floor(M/10);L=M%10;l?(O=48,K=40,D=28):k?(O=K=40,D=28):(O=K=24,D=20);Q=O;if(151===M||152===M||153===M)D-=4,G=x[7][0][2],Q=O*Math.max(G+2,D)/D;I=[-Q/2,-O/2,Q,O,K*L,K*I,K,K];A.Ta.push(I)}if(x[2]&&x[7])for(G=x[2],I=0;I<x[2].length;I+=1)A.Da.push(c.qd.jk),B=x[7][I],l&&!e&&(G[I][0]=Math.round(G[I][0]*v),G[I][1]=Math.round(G[I][1]*v),G[I][2]=Math.round(G[I][2]*v),G[I][3]=Math.round(G[I][3]*v)),L=G[I][0],O=G[I][1]-(l?4:2),K=B[3],D= B[2],L<-D&&M&&x[3]&&(L=-D+A.Ta[0][0]),L-=2,A.Le=K-4,4===m&&"\\u5317\\u4eac"===A.name&&(O=l?-50:-26),A.Ta.push([L,O,D,B[3],B[0],B[1],B[2],B[3]]);A.Wr=x[5];A.Wr&&P.push(A.Wr);A.qs=x[4];A.si=x[9];A.o5=x[10];A.Rf=M;A.Ku=H;c.ha||(c.ha=[]);c.ha.push(A)}c.ae||(c.ae={},c.ae.ff=P,g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:c}))}r===s[s.length-1]&&(c.status="loaded",h=c,c.Ja=c.xa=!0)}}else q.LT(b,c,u,g.a.bind(q.tS,q))}}var h=null,k=g.l.Z,l=this.h.ia,m=a[0].split("-");1===m.length&&(m=a[0].split("_"));c=parseInt(m[1]); var n=parseInt(m[2]),p=parseInt(m[0]),q=this,r=m[3],s=this.h.ha,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.Yj.oy),v=this.h.ia?this.h.Za:1,x=Math.pow(2,p);10>p&&(c<=m&&f(c+x,n,p),c>=x-m&&f(c-x,n,p));f(c,n,p);return h}};g.N.canvas.uL=g.N.canvas.Bj.extend({ja:[g.vL]});g.N.canvas.Bj.zb({oT:function(a){this.ox++;var b=this.Cm,c=this.wk;this.ny={};var d=this.h.ia?this.h.Za:1;this.ah=d;var e;0!==a.R.rotation?(e=2*Math.floor(a.R.Ga.tc.x)*d,d*=2*Math.floor(a.R.Ga.tc.y)):(e=a.size.width*d,d*=a.size.height);g.j.dm(b,e,d,!0);g.l.Tla&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.Qj=0;this.labels&&this.NS(this.labels);this.labels&&this.Vua(this.labels,c,g.yj.hpa(this.e.D),this.ad,e,d);this.O4=[];this.labels&&(this.labels.Oo=this.zoom,this.labels.No= this.nb,this.labels.fq=this.rotation,this.labels.TJ=this.h.ia,this.labels.size=a.size);a.wb&&(this.wb=a.wb);this.wb&&(this.wb.Oo=this.zoom,this.wb.No=this.nb,this.wb.fq=this.rotation,this.wb.size=a.size);this.q("afterLabelRender")},Uua:function(a,b,c){var d=void 0===b.ek?!0:b.ek,e=1,f=void 0===b.visible?!0:b.visible,h=null;if(b.sc&&this.e.od){var k=h="",l="";b.ld&&b.ld.length&&this.QP&&(l=b.ld[0],h=l[3],k=l[4],l=b.lj?"":l[7]);if(h=this.J.hy&&this.J.hy(h,k,l,b.sc,b.ou))f=h[4],d=h[3],e=h[5]}if(f){if(this.wk.globalAlpha!== c||e)this.wk.globalAlpha=c||e;f=0;for(k=b.Da.length;f<k;f+=1)(d||"CANVAS"===b.Da[f].tagName)&&this.xna(a,b.Da[f],b.Ta[f],b.jq,c||e);this.wk.globalAlpha!==c&&(this.wk.globalAlpha=c);b.ld&&this.QP&&(b.dj?this.zna(a,b,h):b.ld.length&&this.QP(a,b,h))}},xna:function(a,b,c,d){var e=this.wk;b=this.lo(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length? b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},lo:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.Tj.K2(a))&&a.loaded)return a},tI:function(a,b){var c=a[0];b&&(c>g.a.Ca/2?c-=g.a.Ca:c<-g.a.Ca/2&&(c+=g.a.Ca));return this.gu(c,a[1])},gu:function(a,b){var c=this.h.ia?this.h.Za:1,d=this.S,e=0,f=0,e=(a-this.Yd[0])/d,f=(b-this.Yd[1])/d;return[Math.round(e*c),Math.round(f*c)]},W2:function(a,b){var c=a[0];b&&(c> g.a.Ca/2?c-=g.a.Ca:c<g.a.Ca/2&&(c+=g.a.Ca));return[c/this.S,a[1]/this.S]},kra:function(a,b){var c=a.wa;return c[0]>b.Fd.x||c[1]>b.Fd.y||c[0]<b.Zb.x||c[1]<b.Zb.y?!1:!0},yCa:function(a){var b=this.O4;if(this.O4.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.$l&&this.kra(e,a.R.Ga)&&(this.R4.push(e),e.zoom=b.zoom,e.$Ca=new Date)}},Np:function(a,b){var c=this.W2(a.wa,a.reverse);if(a.$l)return this.a4(c,a,b);if(a.lj){var d=!1,e=a.wa;if(a.dj){var f=Math.pow(2,20-this.zoom),h=20*f, c=[],k=[],l=[],m=!0;for(g.Ev.font=a.tq+"px "+a.font;m;){for(var n=[],p=[],q=!0,r=0;r<a.name.length;r+=1){var s=g.Ev.measureText(a.name[r]).width/this.ah*f,u=g.zj.JO(e,s/2+h),h=h+s;if(!u){m=q=!1;break}if(s=this.wR(this.W2(u),5,b))p.push(s),n.push(u);else{q=!1;break}}h+=256*f;q&&(k.push.apply(k,n),c.push.apply(c,p))}if(k.length){d=!0;for(r=0;r<k.length;r+=1)f=k[r][2],f=(new g.H(e[f+1][0]-e[f][0],e[f+1][1]-e[f][1])).direction(),l.push(360-f);a.WR=k;a.pra=l}return d?c:!1}return a.Ym?this.a4(c,a,b):this.zoom< a.z?!1:!0}},NS:function(a){function b(b){a.opacity[b]<1-e?(a.opacity[b]+=e,d.he=1,d.Qj=1):a.opacity[b]=1}function c(b){a.opacity[b]>e?(a.opacity[b]-=e,d.he=1,d.Qj=1):a.opacity[b]=0}var d=this,e=0.34;if(!a.CE||"stable"==this.Ff&&"stable"!=this.TR){for(var f=0,h=a.length;f<h;f+=1){var k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id;if(k.jj){var m=this.Np(k);m?(this.Po(m),k.Fg=!0,b(l)):(k.Fg=!1,c(l))}else l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l])}a.CE=!0}else if("zoomIn"== this.Ff){f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj?k.Fg&&(m=this.Np(k,!0),this.Po(m),b(l)):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l]);f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj&&!k.Fg&&((m=this.Np(k))?(this.Po(m),k.Fg=!0,b(l)):(k.Fg=!1,c(l)))}else if("zoomOut"==this.Ff||a.zoom>this.zoom)for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj?k.Fg?(m=this.Np(k))?(this.Po(m),k.Fg=!0,b(l)):(k.Fg= !1,c(l)):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l]);else for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj?k.Fg?b(l):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l]);return!1},Vua:function(a,b,c,d,e,f){d=!1;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.lj||k.ap&&c&&0<=c.indexOf(k.ap))){var l=this.tI(k.wa,k.reverse);-256>l[0]||l[0]> e+256||-256>l[1]||l[1]>f+256||a.opacity[k.id]&&this.Uua(l,k,a.opacity[k.id])}}},GI:function(a){if(a.wb&&a.wb.length)if(this.wb&&this.wb.length){if(this.wb!==a.wb||this.wb.Oo!==this.zoom||this.wb.No!==this.nb||this.wb.fq!==this.rotation||!this.wb.size.cb(a.size))return!0}else return!0;else if(this.wb&&this.wb.length)return!0},kP:function(a){this.hh&&this.hh.TJ!==this.h.ia&&this.h.set("reload");return this.Qj||this.GI(a)||this.labels&&(this.e.sQ||this.labels!==this.hh||!this.hh||this.hh.Oo!==this.zoom|| this.hh.No!==this.nb||a.Tk||this.hh.fq!==this.rotation||this.hh.TJ!==this.h.ia||!this.hh.size.cb(a.size))?!0:!1},a4:function(a,b,c){var d,e=b.Ta.length,f=[];if(b.si>this.zoom)d=!0;else for(var h=0;h<e;h+=1){var k=b.Ta[h];if(!k[8]){var l=k[2],m=k[3],n=k[0],k=k[1];this.h.ia&&(l/=2,m/=2,n/=2,k/=2);var p=b.margin,n=n-p,k=k-p,l=l+2*p,m=m+2*p,n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Rr),m=Math.ceil((k+m)/this.Rr),n=Math.floor(n/this.Rr),k=Math.floor(k/this.Rr);(m=c?[n,l,k,m]:this.b4(n,k,l,m))?f.push(m): d=!0}}return d?!1:f},wR:function(a,b,c){var d=a[0]-b/2;a=a[1]-b/2;var e=Math.ceil((d+b)/this.Rr);b=Math.ceil((a+b)/this.Rr);d=Math.floor(d/this.Rr);a=Math.floor(a/this.Rr);return c?[d,e,a,b]:this.b4(d,a,e,b)},Po:function(a){for(var b=0;b<a.length;b+=1)for(var c=a[b][0],d=a[b][2],e=a[b][3],f=0,h=a[b][1]-c;f<=h;f+=1)for(var k=0,l=e-d;k<=l;k+=1)this.ny[c+f]||(this.ny[c+f]={}),this.ny[c+f][d+k]=1},b4:function(a,b,c,d){for(var e=0,f=c-a;e<=f;e+=1)if(this.ny[a+e])for(var h=0,k=d-b;h<=k;h+=1){if(1===this.ny[a+ e][b+h])return!1}else this.ny[a+e]={};return[a,c,b,d]}});g.N.canvas.Bj.e$=g.aa.extend({r:function(a){this.N=a},Dja:function(a){this.gs=a;return this.jO([0,0,0])?!0:this.gs=!1},HY:function(){return this.N.Ze?!1:!0},xea:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.Aea.apply(this,b);case "label":return this.Bea.apply(this,b);default:console.error("Unknown type",a)}}},QX:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},Yja:function(a){return 0>a?0:255< a?255:Math.round(a)},p0:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.Yja(a[b+c]);return a},iO:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},tja:function(a){return[255-a[0],255-a[1],255-a[2]]},jO:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.gs){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},Cea:function(a,b){var c=20,d=10;switch(b.ro){case "active":c+=20,d+=20}return this.iO(this.jO(a,c),d)},lY:function(a,b){var c=-110;switch(b.ro){case "active":c+=30}return this.iO(this.jO(this.tja(a),c),50)},zea:function(a){return this.iO(a,20)},kY:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.p0(c,d)},Ida:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.IM(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{kya:0<e? d/e:0,oma:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},IM:function(a,b,c){return b*c+a},LG:function(a,b,c,d,e,f,h){var k=this.IM(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.r5||h.l8&&!h.l8.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},tia:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},gx:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},Nja:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.tia(f, c[c.length-1])<=b&&c.push(f)}return this.gx(c[c.length-1],a[a.length-1])?c:null},DAa:function(){},Kba:function(a,b,c,d){d=g.extend({r5:0.2,m5:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.LG(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.LG(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.LG(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.LG(a,f,e,b, c,m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.gx(l[l.length-1],k[0])&&this.gx(k[k.length-1],m[0])&&this.gx(m[m.length-1],h[0])&&this.gx(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.Nja(b[e],d.m5),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},jda:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},bY:function(a,b){this.g0||(this.g0=document.createElement("canvas"));var c=this.g0;c.width=a;c.height=b;return c},Pda:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},uX:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},zW:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.uX(e))):a[this.Pda(e)].apply(a,this.uX(e))}},sda:function(a){a=this.lY([255,255,255],{ro:a.ro});this.p0(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},yea:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=g.extend({ro:"hover",L0:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.bY(2*e+10,f),k=h.getContext("2d"), l=this.jda(b),m=c.padding;g.l.Mc&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.zW(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.L0&&10<b.length;var u=c.strokeStyle||this.sda(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.Mc?2:1.2;k.stroke();k.restore();return{xa:h,ci:[0,0,e,f],Md:a?function(a,c){this.Pja(a,c,b,u)}:null}},Pja:function(a,b,c,d){this.Oba();var e=this.N.ox;this.pW(a,c,{duration:200,HS:0,startTime:Date.now(),Iva:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.Mc?2:1;a.translate(b[0],b[1])},lya:function(){return this.N.ox!==e}})},Oba:function(){this.JL&&g.a.fi(this.JL)},pW:function(a,b,c,d){this.HY()?this.JL= g.a.Qc(function(){this.JL=null;if(c.lya.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.HS<f){var h=1===e?b:b.slice(c.HS,f+1);h.length&&(a.save(),c.Iva.call(this,a,e),this.zW(a,h),a.stroke(),a.restore());c.HS=f}1>e?this.pW(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},Zba:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n= 4*this.IM(c,m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},vfa:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},Xea:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.vfa(a,b,d*f);e.length&&this.gx(h,e[e.length-1])||e.push(h)}return e},Yea:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.Xea(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},Tda:function(a, b,c,d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.Yea(a,5);return a},Aea:function(a,b,c,d,e,f){b=a.ci;var h=c?c.zR:this.QX(d,e,b);if(h){var k=c?c.O3:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.Zba(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.N.e)&&c.D?c.D.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.Ida(l);a=!a.Wqa&&0.46<=l.kya;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.lY:this.zea,u=0,v=d.length;u<v;u+=4)this.kY(d,u,e,u,s,{ro:f});if(m&&(e=a&&!g.l.Mc?this.Kba(d,b,q,{l8:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,r5:0.2,m5:4}):null,e||(e=l.oma,e=this.Tda(e[0],e[1],e[2],e[3],0.2)),e)){var x=this.yea(r,e,{ro:f,fillStyle:"active"!==f?null:"#ddd",oJ:h,L0:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{oJ:h, Zy:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(x.xa,x.ci[0],x.ci[1],x.ci[2],x.ci[3],b[0],b[1],b[2],b[3]);x.Md&&(x.Md.call(this,a,b),x.Md=null)}}}return{oJ:h,Zy:function(a,b){if(m){var c=this.bY(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},Bea:function(a,b,c,d,e,f){a=a.ci;if(c=c?c.zR:this.QX(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.kY(d,a,e,a,this.Cea,{ro:f});return{oJ:c,Zy:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},dY:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.BY){if((b=this.N.lo(b))&&b.loaded)return c=[4,4],g.l.Mc&&(c[0]*=2,c[1]*=2),{type:"icon",Wqa:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,ci:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",ci:[f,a,d,e]}}}); g.N.canvas.Bj.zb({OX:function(){this.RM||(this.RM=new g.N.canvas.Bj.e$(this));return!1===this.RM.Dja(this.gs)?null:this.RM},qt:function(a,b){var c=this.OX();if(c&&c.HY()&&a&&a.Da&&a.Ta&&0===this.rotation){var d=this.ox,e=this.tI(a.wa),f=[],h;a.Zq||(a.Zq=[]);var k=a.Zq;for(h=a.Ta.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].O3===b)continue}var l=c.dY(e,a.Da[h],a.Ta[h]);if(l){var m=c.xea(l,a,k[h],this.Cm,this.wk,b);m&&(k[h]={O3:b,rev:d,zR:m.oJ},f.push({Zy:m.Zy,ci:l.ci,CD:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.CD-b.CD});h=0;for(d=f.length;h<d;h++)f[h].Zy.call(c,this.wk,f[h].ci),f[h].Zy=null}},nA:function(a){a.Zq&&(a.Zq.length=0,a.Zq=null)},NG:function(){var a=this.wk;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},SG:function(a){if(a&&a.Da&&a.Ta&&a.Zq){var b=this.wk,c=this.OX();if(c){for(var d=this.ox,e=this.tI(a.wa),f=a.Zq,h=0,k=a.Ta.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.dY(e,a.Da[h],a.Ta[h]);m&&m.ci&&b.putImageData(l.zR,m.ci[0], m.ci[1])}}a.Zq=null;this.ox++}}}});g.jw={g:function(a,b,c,d,e){if(this.ee(a,b,c||this))return this;var f=this.af=this.af||{};f[a]=f[a]||[];e?f[a].unshift({sb:b,Re:c||this,oj:d}):f[a].push({sb:b,Re:c||this,oj:d});"complete"===a&&this.Ja&&this.q(a);return this},ee:function(a,b,c){var d=this.af;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].sb===b&&d[a][e].Re===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},G:function(a,b,c){if(!this.ee(a))return this;var d=this.af;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].sb!==b&&"mv"!==b||c&&d[a][e].Re!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},nJ:function(a,b){if(!this.ee(a))return this;var c=this.af;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].Re===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},q:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.ee(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.af[a]),f=0;f<e.length;f+=1)e[f].sb&&(e[f].sb.call(e[f].Re||this,d),e[f]&&e[f].oj&&this.af[a]&&this.af[a].splice(f,1));return this},hi:function(a){a?this.af&&this.af[a]&&(this.af[a]=null):this.af=null;return this}};(function(){if(!g.pk){g.pk=g.QK();var a=g.a.EC({Wy:"posToCoord",tA:"_decodeBoundsList"});g.pk.jf(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.vL.Wy.toString()+",\\n      "+a._decodeBoundsList+": "+g.ww.tA.toString()+"\\n  }"));g.pk.jf(null,function(){return{ub:function(){var a=0;return function(c){c._amap_label_id_||(a+=1,c._amap_label_id_=a);return c._amap_label_id_}}(),ps:function(a,c){a.nh.Je||(a.nh.Je=this.Je);a.vo?this.Rsa.call(this,a,c):this.Ssa.call(this,a,c)},Ssa:function(a, c){for(var d=a.sE,e=a.Rk,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.GR&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Se=a.nh.Se=l["x-vd-v"],this.Df=a.nh.Df=[l.tv||"",l.vdv].join("-"),this.Dh=a.nh.Dh=l.tv):this.Qsa(this.extend({},a,{gC:l,Ic:f})))}f.length?this.parseLabel(this.extend({},a.nh,{Ic:f}),function(d,f){var h=f.data,k=f.hqa;c(d,{dc:a.dc,Eb:a.Eb.filter(function(a){return"loaded"===a.status}),data:h,hqa:k,Rk:e,uf:{Se:a.nh.Se,Df:a.nh.Df,Dh:a.nh.Dh,Ed:a.Ed}},{Zp:!e,Jk:e})}):c(null,{dc:a.dc,data:null, Rk:e},{Zp:!e,Jk:e})},Qsa:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key===n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=f[1],a.qd=b,"string"===typeof b.b&&(b.b=u.tA(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,jk:"limg-"+a.key+"-"+e});else{b={tg:a.ra,Ai:n,Ma:f,vd:v,TC:"building"===v,oi:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.qd=a.qd;v===l[l.length- 1]&&(a.status="loaded");k.push(b)}}var d=a.Eb,e=a.UR,f=a.gC,h=a.Ed,k=a.Ic,l=a.ha,m=a.xf,n=a.dR,p=a.ke,q=f[0].split("-");a=parseInt(q[1]);var r=parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},Rsa:function(a,c){for(var d=a.sE,e=a.Rk,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.GR&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Se=a.nh.Se=l["x-vd-v"],this.Df=a.nh.Df=[l.tv||"",l.vdv].join("-"),this.Dh=a.nh.Dh=l.tv):this.Psa(this.extend({},a,{gC:l, Ic:f,Se:this.Se||"v4"})))}d=a.Eb.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.Eb.length-1;0<=f;f--)"loaded"===a.Eb[f].status&&a.Eb.splice(f,1);c(null,{dc:a.dc,yBa:[],Eb:d,Rk:e,uf:{Se:a.nh.Se,Df:a.nh.Df,Dh:a.nh.Dh,Ed:a.Ed}},{Zp:!e,Jk:e})},Psa:function(a){function c(a,b,c,f){var l=[f,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.ra,a&&"loaded"!==a.status&&-1!==k.indexOf(w))if("limg"===w)p[1]&&(a.qd={url:"data:image/png;base64,"+p[1],jk:"limg-"+a.key+"-"+ n});else{if("roadlabel"===w)for(c=1;c<p.length;c+=1){var m=p[c],v=d.Rv(m[1],q);if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){var u=t.Wy(v,b),v={margin:0,z:f,zIndex:9E3,wa:u,name:m[0],lj:!0,Na:v,Da:[],Ta:[],visible:!0,ek:!0};v.id="roadlabel_"+d.ub(v);v.jq=15>m[2]%90||75<m[2]%90?90*Math.floor((m[2]+15)/90):m[2];u=m[3];0<=m[8]&&(v.yG={name:m[6],q8:m[7],dir:m[8]});var x=u[2],L=u[3],O=-Math.floor(L/2);if(m[4]){v.Tu=!0;var K=m[5].split(":"),D=K[1],D=parseInt(D)-1,K=r.Cc+"://vdata.amap.com/style_icon/icon-normal-"+ (s||h?"big":"small")+".png";v.Da.push(K);var K=Math.floor(D/10),Q=D%10,P=0,J=0,N=0;h?(P=48,N=J=40):s?(P=J=40,N=36):(P=J=24,N=20);var V=P*Math.max(x+2,N)/N,K=[-V/2,-P/2,V,P,J*Q,J*K,J,J];v.Le=7;v.Ta.push(K)}v.Da.push(a.qd.jk);v.Le=11;v.Ta.push([-Math.floor(x/2),O,x,L,u[0],u[1],u[2],u[3]]);a.ha||(a.ha=[]);a.ha.push(v)}}else if("poilabel"===w){O=[];for(c=1;c<p.length;c+=1)if(m=p[c],v=d.Rv(m[1],q),!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){u=t.Wy(v,b);v={id:m[4],margin:e,zIndex:9001,wa:u,name:m[0].replace("^", ""),$l:!0,Na:v,Da:[],Ta:[],visible:!0,ek:!0};v.id||(v.id="poilabel_"+d.ub(v));D=0;v.Be=m[8];m[6]&&(K=m[6].split(":"),D=K[1],L=Math.floor((parseInt(K[0].split("_")[1])-28)/2));if(D&&m[3]){K=r.Cc+"://vdata.amap.com/style_icon/icon-"+(1===L?"biz-":"normal-")+(s||h?"big":"small")+".png";v.Da.push(K);D=parseInt(D)-1;K=Math.floor(D/10);Q=D%10;N=J=P=0;h?(P=48,J=40,N=28):s?(P=J=40,N=28):(P=J=24,N=20);V=P;if(151===D||152===D||153===D)N-=4,x=m[7][0][2],V=P*Math.max(x+2,N)/N;K=[-V/2,-P/2,V,P,J*Q,J*K,J,J];2<= D&&5>=D&&(K[8]=!0);v.Ta.push(K)}if(m[2]&&m[7])for(x=m[2],K=0;K<m[2].length;K+=1)v.Da.push(a.qd.jk),u=m[7][K],h&&(x[K][0]=Math.round(x[K][0]*y),x[K][1]=Math.round(x[K][1]*y),x[K][2]=Math.round(x[K][2]*y),x[K][3]=Math.round(x[K][3]*y)),Q=x[K][0],P=x[K][1]-(h?4:2),J=u[3],N=u[2],Q<-N&&D&&m[3]&&(Q=-N+v.Ta[0][0]),Q-=2,v.Le=J-4,4===f&&"\\u5317\\u4eac"===v.name&&(P=h?-50:-26),v.Ta.push([Q,P,N,u[3],u[0],u[1],u[2],u[3]]);v.Wr=m[5];v.Wr&&O.push(v.Wr);v.qs=m[4];v.si=m[9];v.o5=m[10];v.Rf=D;v.Ku=L;a.ha||(a.ha=[]); a.ha.push(v)}a.ae||(a.ae={},a.ae.ff=O)}w===k[k.length-1]&&(a.status="loaded",a.Ja=a.xa=!0)}}var d=this,e="3D"==a.Bi?0:-3,f=a.Eb,h=a.Mc,k=a.ha,l=a.dR,m=a.Za,n=a.UR,p=a.gC,q=a.Se,r=this.A,s=this.l.Z,u=p[0].split("-");1===u.length&&(u=p[0].split("_"));a=parseInt(u[1]);var v=parseInt(u[2]),x=parseInt(u[0]),t=this,w=u[3],y=h?m:1,m=Math.pow(2,x);10>x&&(a<=l&&c(f,a+m,v,x),a>=m-l&&c(f,a-m,v,x));c(f,a,v,x)}}},function(a){a||(g.pk.qra=!0)})}})();(function(){if(!g.zc){g.zc=g.QK();var a=g.a.EC({g:"on",ee:"hasEvents",G:"off",nJ:"offByContext",q:"emit",hi:"clearEvents"});g.zc.jf(null,function(){return{zqa:function(){var a=this;this.sr=[];this.tr={};if("undefined"!==typeof worker)for(var c=0;10>c;c++){var d=new Worker(this.Pla);d.status={index:c,V3:!0,IJ:!1,oK:0};d.addEventListener("message",function(c){var d=c.data;c=c.target;d.ping&&200===d.status?(c.status.IJ=!0,a.sr.filter(function(a){return a.status.IJ}).length===a.sr.length&&(a.sr.IJ=!0)): d.result&&a.lua(c,d)});this.sr.push(d);d.postMessage({cmd:"ping",ts:(new Date).getTime()})}},lua:function(a,c){var d=c.parentTaskId,e=c.taskId,f=this.tr[d],h=!1;f[e].data=c;f[e].index=a.status.index;for(var k=0,l=f.length;k<l;k++){var m=f[k];if(m&&m.Gc)if(m.data){var n=m.data;m.Gc(n.err,n.result,m.MK);m.MK.Jk&&(h=!0);m.data=null;m.ru=!0;m.Gc=null;m.MK=null;f[k]=null}else if(!m.ru)break}h&&e===f.length-1&&!f[e]&&delete this.tr[d];0===--a.status.oK&&(a.status.V3=!0)},Nka:function(a,c,d){var e=a.parentTaskId; this.sr.sort(function(a,b){return a.status.oK-b.status.oK});void 0===this.tr[e]&&(this.tr[e]=[]);this.tr[e].push({MK:c,Gc:d});c=this.sr[0];c.status.V3=!1;c.status.oK++;a.taskId=this.tr[e].length-1;a.ts=(new Date).getTime();a.workerIndex=c.status.index;c.postMessage(a)},c5:function(a,c){var d=this;if(3<this.Lt||this.disabled)return this.kh(a,c);var e=a.Eb,f=a.Ed,h=a.we,k=a.xq,l=a.Mqa,m=a.ha;if(h&&this.uB())this.tl(e,c);else if(!this.N3(a,function(a,b){var c=a.Eb,d=a.xq;b.reverse().forEach(function(a){a= c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(),this.wa.length+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.np[n]={Eb:e,Ed:f,B:a,Gc:c,we:h};h||(this.yk[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.MI()||setTimeout(function(){d.MI()||(d.Lt?d.Lt++:d.Lt=1,d.Mna(p)&&(delete d.np[n],delete d.yk[n],d.kh(a,c)))},300);this.g("tiles",this.rD,this);this.g("ack",this.qD,this);this.g("disable",this.oD, this)}},Cla:function(a){this.D4()&&this.send(a)},oD:function(){this.disabled=!0;this.close();for(var a in this.np)this.np.hasOwnProperty(a)&&this.oX(a)},oX:function(a){var c=this.np[a];c&&(this.tl(c.Eb,c.Gc),delete this.np[a],delete this.yk[a])},qD:function(a){var c=a.reqId,d=this.np[c];d&&(a.content.status?d.Gc&&(d.Gc(null,{dc:d.B.dc,oka:!0,pDa:!0},{Zp:!1,Jk:!0}),delete this.np[c],delete this.yk[c]):this.oX(c))},rD:function(a){var c=this.np[a.reqId];if(c)if(c.we){a=a.content.data;for(var d=0,e=a.length;d< e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0,-1).join("/");this.Gj[h]?this.Gj[h].push(f):(this.Gj[h]=[f],this.nt++);this.Gj[h].length===c.B.ha.length&&(this.Gj[h].TY=!0)}}}else this.ps(this.extend({Rk:!1},c.B,{sE:a.content.data,Ed:a.content.opt}),c.Gc)},Ita:function(a,c,d){var e=c.Rk,f=c.nh;c.cu||(c.cu=[]);if(a.length){for(var h=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;a||(q.Eb=c.Eb.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key, status:a.status}}),q.data=b.data,q.Rk=e.Jk,q.Rk&&(q.cu=c.cu,c.cu=null));d(a,q,e)},k=this.extend({},f),l=0,m=a.length;l<m;l++){var n=a[l];n&&c.cu.push({Ai:n.Ai,vd:n.vd,Ma:JSON.stringify(n)})}var p={Zp:!e,Jk:!!e},q={dc:c.dc,$t:c.$t,cu:[],uf:{Se:f.Se,Dh:f.Dh,Df:f.Df,Ed:c.Ed}},e=c.xf?"parseDataToWebGL":"parseDataToVector";if(c.xf&&this.sr&&this.sr.IJ)for(f=0,l=Math.ceil(a.length/15);f<l;f++)m=null,m=f===l-1?p:{Zp:!0,Jk:!1},k.Ic=a.slice(15*f,15*(f+1)),this.Nka({cmd:e,args:[k],parentTaskId:c.dc},m,h);else k.Ic= a,k.Je=this.Je,this[e](k,h)}else e&&(this.tr?(a=this.tr[c.dc])&&a.length&&a[a.length-1]&&(a[a.length-1].MK={Zp:!1,Jk:!0}):d(null,{dc:c.dc,Eb:[],data:null,Rk:e},{Zp:!e,Jk:!!e}))},ps:function(a,c){for(var d=a.sE,e=[],f=0,h=d.length;f<h;f++){var k=d[f];k&&(a.GR&&(k=JSON.parse(k)),k["x-vd-v"]?(this.Se=a.nh.Se=k["x-vd-v"],this.Dh=a.nh.Dh=k.tv,this.Df=a.Df=[k.tv||"",k.vdv].join("-"),k.bgc&&(k="#"+k.bgc.substring(2),a.$t!==k&&(a.$t=k))):this.pD(this.extend({},a,{gC:k,Ic:e})))}this.Ita(e,a,c)},MEa:function(a){for(var c= 0,d=a.length;c<d;c++){var e=a[c];e.op&&(self.Ut(e.op),delete e.op)}}}});g.zc.jf(null,new Function("\\n    return {\\n      "+a.on+": "+g.jw.g.toString()+",\\n      "+a.hasEvents+": "+g.jw.ee.toString()+",\\n      "+a.off+": "+g.jw.G.toString()+",\\n      "+a.offByContext+": "+g.jw.nJ.toString()+",\\n      "+a.emit+": "+g.jw.q.toString()+",\\n      "+a.clearEvents+": "+g.jw.hi.toString()+"\\n    }\\n  "));g.HV?g.zc.jf(null,g.HV,function(a){a||(g.zc.f4=!0)}):g.zc.f4=!0}})(); ');_jsload_('overlay', 'g.Aa.yc=g.Aa.Ee.extend({r:function(a,b){var c=a.length;this.zf=Array(c);for(var d,e,f=0;f<c;f+=1)if(d=a[f],e=new g.Aa.$K(d),this.zf[f]=e,!b)if(0===f){if(0===d.length)break;e.Pp(d)||d.reverse()}else 0!==d.length&&e.Pp(d)&&d.reverse()},pd:function(){if(0===this.zf.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.kg){for(var a=this.zf[0].pd(),b=1;b<this.zf.length;b+=1){var c=this.zf[b].pd();g.I.K1(a,c)||g.I.extend(a,c)}this.kg=a}return this.kg},o3:function(){return this.zf},KCa:function(){for(var a= 0;a<this.zf.length;a+=1);},li:function(){return g.Aa.Fe.TE},Nd:function(a){for(var b=this.zf,c,d=0,e=b.length;d<e&&(c=b[d].Nd(a),0<d&&(c=!c),c);d+=1);return c},xma:function(a){for(var b=this.zf,c,d=[],e=0,f=b.length;e<f;e+=1)(c=g.wd.Pp(b[e].wa))?d.length&&d[d.length-1].push(e):d.push([e]);e=0;for(f=d.length;e<f;e+=1){c=!1;for(var h=0,k=d[e].length;h<k&&(c=g.Aa.$K.prototype.Nd.call(b[d[e][h]],a),0<h&&(c=!c),c);h+=1);if(c)return!0}}});g.Aa.pw=g.Aa.Ee.extend({r:function(a){var b=a.length;this.Nf=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.yc(a[c]);this.Nf[c]=d}},pd:function(){if(!this.kg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.Nf,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].pd());this.kg=a}return this.kg},AQ:function(){return this.wa},li:function(){return g.Aa.Fe.QE},O2:function(){return this.Nf},Nd:function(a){for(var b=!1,c=0,d=this.Nf.length;c<d;c+=1)if(this.Nf[c].Nd(a)){b=!0;break}return b}});g.Aa.Jq=g.Aa.Ee.extend({r:function(a){this.wa=a},pd:function(){if(!this.kg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.wa.length;b<c;b+=1)g.I.SH(a,this.wa[b]);this.kg=a}return this.kg},AQ:function(){return this.wa},li:function(){return g.Aa.Fe.WK},Ooa:function(){return this.wa.length},Wx:function(a){return g.wd.Dr(a,this.wa)}});g.Aa.$K=g.Aa.Jq.extend({li:function(){return g.Aa.Fe.sV},Pp:g.wd.Pp,Nd:function(a){return g.wd.Nd(a,this.wa)}});g.Aa.ow=g.Aa.Ee.extend({r:function(a){var b=a.length;this.wa=a;this.Nf=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.Jq(a[c]);this.Nf[c]=d}},O2:function(){return this.Nf},pd:function(){if(!this.kg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.Nf,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].pd());this.kg=a}return this.kg},AQ:function(){return this.wa},li:function(){return g.Aa.Fe.fL},Ooa:function(){return this.wa.length},Wx:function(a){for(var b=Infinity,c=0,d=this.Nf.length;c<d;c+=1)b=Math.min(b, this.Nf[c].Wx(a));return b}});g.w.Xb=g.w.sh.extend({r:function(a,b){arguments.callee.ka.apply(this,arguments);this.gH=a;this.W("options",a);this.W("geodesic",a);this.W("path",a);this.W("noSelect",a);this.au();this.W("display",b);b.g("zoomend",this.Rn,this)},vp:function(){if("3D"==this.map.D.view.type){var a=this.L;a&&(a.cc().Fj=!0)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},Bo:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Gd(b),e=[],f,h,b=0;for(f= c.length;b<f;b+=1)h=this.map.Ab(c[b]).add(d),e.push(this.map.Qd(h));0<e.length&&this.set("path",e);if(this.Ht&&0<this.Ht.length)for(b=0,c=this.Ht.length;b<c;b+=1)this.Ht[b].Bo(a)},Ly:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.gH.q("change",{type:"change",target:this.gH})},EA:function(a){this.get("options");return this.$ea()?this.Eda(a):this.EM(a)},$ea:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, Eda:function(a){if(!a||!a.length)return[];var b,c=[],d,e,f=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);f.push(this.FM(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.FM(a[d]),b=Math.round(Math.abs(h[0]-f[f.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].Q-a[d].Q))),"3D"==this.map.D.view.type&&(b=Math.round(b/1.2)),b=g.T.dpa(a[d-1],a[d],b),c.push.apply(c,b),f.push.apply(f,this.EM(b)),c.push(a[d]),f.push(h);return f},pH:function(a){var b= [],c=[],d,e,f,h,k,l,m=a.cc();m instanceof g.Aa.Jq?l=[m]:m instanceof g.Aa.ow&&(l=m.Nf);m=[];a=a.Ya.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(f=l[d].wa,f.length)for(h=0,k=f.length;h<k;h+=1)if(b=f[h],b=this.Wf(b),b[0]=Math.round(b[0]+a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]|| b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},au:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.Rh({zM:this.Yb.bG,name:"polyline-"+g.a.ub(this),zIndex:this.get("options").zIndex||1,map:a,da:new g.Aa.Jq(this.EA(b)),style:this.get("options")});b.br=this;b.cc().Fj=!0;this.W("resolution",a);this.W("center",a);this.W("coords",b);this.W("style",b);b.Qe("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){var a= this.L,b=this.get("path");a&&(this.vp(),this.set("coords",this.EA(b)),a.Te=!0,"c"!==this.map.get("overlayRender")&&a.Ya?(b=this.pH(a),g.l.xo||b.push("e"),b=b.join(" "),0===b.length&&a.Ya?(a.Ya.Sf.parentNode.removeChild(a.Ya.Sf),a.Ya.$b.parentNode&&a.Ya.$b.parentNode.removeChild(a.Ya.$b),a.Ya=null):g.l.xo?(a.Ya.Sf.setAttribute("d",b),a.Ya.$b&&a.Ya.$b.setAttribute("d",b)):(a.Ya.Sf.path=b,a.Ya.$b&&(a.Ya.$b.path=b))):this.set("display"))},Rn:function(){},visibleChanged:function(){this.L&&(this.L.Ya?this.get("visible")? (this.L.Ya.Sf.style.display="block",this.L.Ya.$b&&(this.L.Ya.$b.style.display="block")):(this.L.Ya.Sf.style.display="none",this.L.Ya.$b&&(this.L.Ya.$b.style.display="none")):this.set("display"))},optionsChanged:function(){this.vp();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.Ir(),this.L.Ya&&(this.L.Ya.Sf.parentNode&&this.L.Ya.Sf.parentNode.removeChild(this.L.Ya.Sf),this.L.Ya.$b&&this.L.Ya.$b.parentNode&&this.L.Ya.$b.parentNode.removeChild(this.L.Ya.$b))); this.set("display")}});g.w.Lz=g.w.Xb.extend({r:function(a,b){this.Hka=a;arguments.callee.ka.apply(this,arguments);this.W("tolerance",a);b.g("zoomend",this.Rn,this)},Bo:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Gd(b),e=[],f,h,b=0;for(f=c.length;b<f;b+=1){h=this.map.Ab(c[b]).add(d);var k=this.map.Qd(h);e.push(k);if(c[b].controlPoints){k.controlPoints=[];for(var l=c[b].controlPoints,m=0,n=l.length;m<n;m+=1)h=this.map.Ab(l[m]).add(d),k.controlPoints.push(this.map.Qd(h))}}0<e.length&&this.set("path", e);if(this.Ht&&0<this.Ht.length)for(b=0,c=this.Ht.length;b<c;b+=1)this.Ht[b].Bo(a)},Ly:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.gH.q("change",{type:"change",target:this.gH})},EM:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return g.ew.Z2(a,this.map.aj,b,this.Hka.B)},toleranceChanged:function(){this.pathChanged()},Rn:function(){this.pathChanged()},GA:function(a,b){for(var c=[],d=void 0,e=void 0,f=void 0,d=0,e=a.length;d<e;d+=1){f= this.map.Ab(a[d]);f.x+=b[0];f.y+=b[1];var h=this.map.Qd(f);c.push(h);if(a[d].controlPoints){h.controlPoints=[];for(var k=a[d].controlPoints,l=0,m=k.length;l<m;l+=1)f=this.map.Ab(k[l]),f.x+=b[0],f.y+=b[1],h.controlPoints.push(this.map.Qd(f))}}return c}});g.w.yc=g.w.sh.extend({r:function(a,b){arguments.callee.ka.apply(this,arguments);this.fH=a;this.W("options",a);this.W("path",a);this.au();this.W("display",b)},vp:function(){if("3D"==this.map.D.view.type){var a=this.L;a&&(a.cc().Fj=!0)}},deltaPosChanged:function(){this.set("display")},Bo:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Gd(b);var b=[],d,e;c.length&&c[0]instanceof g.T&&(c=[c],e=!0);for(var f=0,h=c.length;f<h;f+=1){for(var k=c[f],l=[],m=0,n=k.length;m<n;m+= 1)d=this.map.Ab(k[m]).add(a),l.push(this.map.Qd(d));b.push(l)}this.fH.q("movepoly",{AJ:a});0<b.length&&this.set("path",e?b[0]:b)},Ly:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.fH.q("movepoly",{AJ:c});this.fH.q("change",{type:"change",target:this.fH})},EA:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof g.T&&(a=[a]);for(var b,c,d=[],e,f=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0;for(c=k.length;b< c;b+=1){var l=f.Ab(k[b]);e.push([l.x,l.y])}d.push(e)}return d},au:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.Rh({zM:this.Yb.bG,name:"polygon-"+g.a.ub(this),zIndex:this.get("options").zIndex||1,map:a,da:new g.Aa.yc(this.EA(b)),style:this.get("options")});b.br=this;b.cc().Fj=!0;this.W("resolution",a);this.W("center",a);this.W("coords",b);this.W("style",b);b.Qe(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.L,b=this.get("path"); a&&(this.vp(),this.set("coords",this.EA(b)),a.Te=!0,"c"!==this.map.get("overlayRender")&&a.ba?(b=this.qH(a),0===b.length?(a.ba.parentNode.removeChild(a.ba),a.ba=null):g.l.xo?a.ba.setAttribute("d",b.join(" ")):(b.push("e"),a.ba.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.L&&(this.L.ba?this.get("visible")?this.L.ba.style.display="block":this.L.ba.style.display="none":this.set("display"))},optionsChanged:function(){this.vp(); this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.Ir());this.set("display")},qH:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,f,h,k,l,m,n=a.ba.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.cc();a instanceof g.Aa.yc?d=[a]:a instanceof g.Aa.pw&&(d=a.Nf);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],f=b.zf,h=f.length,0<h)for(var r= 0;r<h;r+=1){var s;k=f[r].wa;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.Wf(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,s=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;s&&q.push("L"+s[0]+" "+s[1])}return q}});g.w.Ug=g.w.sh.extend({r:function(a,b){arguments.callee.ka.apply(this,arguments);this.W("center",a);this.W("draggable",a);this.W("unit",a,!0);this.W("radius",a);this.W("options",a);this.au();this.W("display",b)},Bo:function(a){var b=this.get("center");a=a.Gd(Math.pow(2,20-this.map.get("zoom")));a=this.map.Ab(b).add(a);b instanceof g.T?this.set("center",this.map.Qd(a)):this.set("center",a)},Ly:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.Yb.q("change", {type:"change",target:this.Yb})},au:function(){if(this.map&&!this.L){var a=this.map,b=a.Ab(this.get("center")),c="px"===this.get("unit"),b=this.L=new g.Rh({PA:!0,zM:this.Yb.bG,name:"circle-"+g.a.ub(this),zIndex:this.get("options").zIndex||1,map:a,da:new g.Aa.vg([b.x,b.y]),style:this.get("options")});b.Ru=c;b.br=this;b.cc().Fj=!0;this.W("resolution",a);this.W("coords",b);this.W("style",b);b.W("visible",this,!0);b.Qe("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},vp:function(){if("3D"== this.map.D.view.type){var a=this.L;a&&(a.cc().Fj=!0)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.L,b=this.map.Ab(this.get("center"));a&&(a.cc().wa=[b.x,b.y],this.vp(),this.set("coords",[b.x,b.y]),this.Te=!0,a.ba?this.J6():this.set("display"))},visibleChanged:function(){this.L&&(this.L.ba?this.get("visible")?this.L.ba.style.display="block":this.L.ba.style.display="none":this.set("display"))}, optionsChanged:function(){this.L&&(this.vp(),this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.Ir(),this.L.Te=!0,this.set("display"))},XO:function(a){var b=[],c=[],d,c=a.cc();c instanceof g.Aa.vg&&(d=[c]);var c=this.map.D.aj.Jp(Math.floor(this.map.get("zoom"))),e=a.ba.rotation,b=this.map.get("size"),f=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(f))+Math.abs(b.height*Math.sin(f)))/2,f=(Math.abs(b.width*Math.sin(f))+Math.abs(b.height*Math.cos(f)))/2,b=this.Wf(d[0].wa); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+f);a=a.get("remain")?5.23:a.Ru?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").P/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},J6:function(){var a=this.L,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.ba)if(g.l.xo)b=this.XO(a),a.ba.setAttribute("d",b);else{b=this.map.D.aj.Jp(Math.floor(this.map.get("zoom")));b=a.Ru?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI*this.get("center").P/ 180));a.ba.style.width=Math.round(2*b);a.ba.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.Wf(a.cc().wa);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.ba.style.top=Math.round(e[1]-b);a.ba.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.L,b=this.get("radius");a&&(this.vp(),a.style.radius=b,a.Te=!0,a.q("rad",{target:a,al:b}),this.J6())}}); ');_jsload_('wgl', 'g.l.rq&&(g.g9=function(a){function b(a,b,c,e,f,h,k){var l=a.Ma;c=[];e=a.tg;var m=null,n=null,s;a.Ma=[];h=h&&16<b;for(var x=[],t=[],Q=[],P=1,J=l.length;P<J;P+=1){var N=l[P],V=N[1].split("&"),m=p(w?w:V[0]),n=p(V[4]);s=N[2];var R=N[0],T=N[3]*Math.pow(2,2)*k,S=N[4],Z={},U=N[5],N=[];if(U&&U.length)for(var W=0,Y=U.length;W<Y;W+=1){var X=U[W].split("-"),V=X[1].split("^");N[X[0]]=V;for(var X=0,aa=V.length;X<aa;X+=1)-1===d(c,V[X])&&c.push(V[X])}if(S&&S.length)for(U=0,Y=S.length;U<Y;U+=1){V=S[U].split("-"); X=parseInt(V[0]);Z[X]={};for(var aa=1,da=V.length;aa<da;aa+=1)Z[X][parseInt(V[aa])]=!0}U=0;for(S=R.length;U<S;U+=1){V=R[U];y||(x=[],Q=[],t=[]);for(var V=r(V,v,b),Y=q(V,e,f,!0),V=Y[1],X=[],W=da=aa=0,Aa=V.length-1;W<Aa;W+=1){var ha=V[W],ea=V[W+1],aa=aa+ha[0],da=da+ea[1];if(!Z[U]||!Z[U][W])if(h){var ma=ea[0]-ha[0],ja=ea[1]-ha[1],sa=5E3+ma+(5E3+ja)/1E4,ja=Math.sqrt(Math.pow(ma,2)+Math.pow(ja,2)),ma=Math.round(T/64),ja=Math.ceil(ja/64);ma?t.push(0,0,ja,ma,0,ma,0,0,ja,0,ja,ma):t.push(-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1);x.push(ha[0],ha[1],-T,sa);x.push(ea[0],ea[1],0,sa);x.push(ha[0],ha[1],0,sa);x.push(ha[0],ha[1],-T,sa);x.push(ea[0],ea[1],-T,sa);x.push(ea[0],ea[1],0,sa)}else Q.push(ha[0],ha[1],0,-1,ea[0],ea[1],0,-1);X.push([ha[0],ha[1]])}W=V.length-1;aa=[aa/W+215440491,da/W+106744817];V=u.Lh(h?X:V,[],0,1);X=0;for(da=V.length;X<da;X+=1)W=-T,h||(W=0),t.push(-1,-1),x.push(V[X][0],V[X][1],W,0);!y&&x.length&&(V=[m,n,s],Y=[new Float32Array(x),new Float32Array(t),new Float32Array(Q),V,Y[1],aa],N[U]&& (Y.$pa=N[U]),a.Ma.push(Y))}}y&&x.length&&(b=256*Math.pow(2,20-e.z),aa=[e.x*b+128,e.y*b+128],Y=[new Float32Array(x),new Float32Array(t),new Float32Array(Q),[m,n,s],null,aa],a.Ma.push(Y));a.dn=c;return a}function c(a,b,c,e,f,h){c=a.Ma;e=[];for(var k=a.tg,l=null,m=null,n={},s=1,x=c.length;s<x;s+=1){var t=c[s],y=t[1].split("&"),l=p(w?w:y[0]),m=p(y[2]),P=y[0]+y[2];n[P]||(n[P]={H8:[],g7:[],Ib:[],Eg:[],jQ:l,borderColor:m,sc:t[2]});var l=n[P].H8,m=n[P].g7,y=n[P].Ib,P=n[P].Eg,J=t[0],N=t[3]*Math.pow(2,2),V= t[4],R={};if((t=t[5])&&t.length)for(var T=0,S=t.length;T<S;T+=1)for(var Z=t[T].split("-")[1].split("^"),U=0,W=Z.length;U<W;U+=1)-1===d(e,Z[U])&&e.push(Z[U]);if(V&&V.length)for(t=0,T=V.length;t<T;t+=1)for(S=V[t].split("-"),Z=parseInt(S[0]),R[Z]={},U=1,W=S.length;U<W;U+=1)R[Z][parseInt(S[U])]=!0;t=0;for(V=J.length;t<V;t+=1){for(var Y=J[t],Y=r(Y,v,b),Y=q(Y,k,f,!0)[1],T=[],S=0,Z=Y.length-1;S<Z;S+=1){var U=Y[S],W=Y[S+1],X=[U[0]-0*N,U[1]-0.3*N],aa=[W[0]-0*N,W[1]-0.3*N];R[t]&&R[t][S]||(h?((W[0]-U[0])*(X[1]- U[1])<(X[0]-U[0])*(W[1]-U[1])&&(l.push(X[0],X[1],2),l.push(W[0],W[1],-1),l.push(U[0],U[1],-1),l.push(X[0],X[1],2),l.push(aa[0],aa[1],2),l.push(W[0],W[1],-1),P.push([U,W,aa,X])),y.push(X[0],X[1],-1,aa[0],aa[1],-1)):y.push(U[0],U[1],-1,W[0],W[1],2));T.push([X[0],X[1]])}Y.pop();S=u.Lh(h?T:Y,[],0,1);P.push(h?T:Y);Y=0;for(T=S.length;Y<T;Y+=1)m.push(S[Y][0],S[Y][1],3)}}a.Ma=[];for(Y in n)n.hasOwnProperty(Y)&&(y=[n[Y].jQ,n[Y].borderColor,n[Y].sc],a.Ma.push([new Float32Array(n[Y].H8),new Float32Array(n[Y].g7), new Float32Array(n[Y].Ib),y,n[Y].Eg]));a.dn=e;return a}function d(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function e(a,b){for(var c=a.Ma,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},f=0,h=c.length;f<h;f++){for(var l=[],m=0,n=c[f].length;m<n;m++){var s=[],r=[];k(s,r,c[f][m][1],a.ra,b);s.forEach(function(a,b){l.push([a,r[b]])})}if(l.length){var v=[[],[],{width:0.75*c[f][0][0],borderColor:p(e[f])}]; l.forEach(function(a){var b=v[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));v[0]=v[0].concat(a[0]);v[1]=v[1].concat(a[1])});v[0]=new Float32Array(v[0]);v[1]=new Uint16Array(v[1]);d.push(v)}}a.Ma=d;return a}function f(a,b,c,d,e,f){function k(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c][0].length/s-1;return b}function l(){Ba.Y.push(new Float32Array(ma));Ba.Vb.push(new Uint16Array(ja))}function m(){ma=[];ja=[];sa=[];Ia=Ja=0}function n(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}for(var s= 11,r="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),v=a.Ma.slice(1),q=v.length-1;0<=q;q--)v[q].e4=q;v.sort(function(a,b){return a[2]>b[2]?1:a.e4>b.e4?1:-1});for(var u={},q=0,t=v.length;q<t;q+=1){var w=v[q],y=w[1].split("&"),R,T,S,Z,U;R=T=S=Z=U=null;var W,Y,X,aa,da=null,Aa=!1;W=Y=X=aa=null;y[1]&&(R=p(y[1]));T=parseInt(y[0]);S=y[2];S!==r[0]&&(S===r[1]?W="round":S===r[2]?W="square":0===S.indexOf(r[5])?(da=!0,X=[3,2]):0===S.indexOf(r[3])?(X=S.substring(5).split(")")[0].split(","), X.forEach(function(a,b){X[b]*=e})):0===S.indexOf(r[4])&&(Z=R,R=y[4]?p(y[4]):[1,1,1,R[3]],X=[12,12],Aa=!0,U=3,T=1));y[3]&&y[4]&&3<y.length&&(U=T+parseInt(y[3]),Z=p(y[4]),S=y[5],S!==r[0]&&(S===r[1]?Y="round":S===r[2]?Y="square":0!==S.indexOf(r[5])&&0===S.indexOf(r[3])&&(U+=1,aa=S.substring(5).split(")")[0].split(","),aa.forEach(function(a,b){aa[b]*=e}))));if(c){if(X)for(y=X.length-1;0<=y;y-=1)X[y]*=e;if(aa)for(y=aa.length-1;0<=y;y-=1)aa[y]*=e}var ha=[];ha.Oc=0;S=[];var ea=[];h(ha,ea,S,w[0],a.tg,b,c, d,e,W);"app"===x&&(T/=4,U/=4);y=[T,R,X,U,Z,aa,da,Aa,W,Y,w[3],w[4]];w=w[2];u[w]||(u[w]=[]);R=[ha,ea,y];f&&R.push(S);u[w].push(R)}var ma=void 0,ja=void 0,sa=void 0,Ja=void 0,Ia=void 0,Ba={Y:[],Vb:[],hash:{}};m();for(var Ca in u)if(u.hasOwnProperty(Ca)){b=u[Ca];65535<k(b)+ja[ja.length-1]+10&&(l(),m());c=[];d=Ba.Vb.length;f=0;for(r=b.length;f<r;f++)v=b[f],q=null,ma=ma.concat(v[0]),ja=ja.concat(n(v[1],Ja)),q=new Float32Array([d,v[1].length,2*Ia]),c.push(q),Ja+=v[0].length/s,Ia+=v[1].length,v[2].ota=v[3], b[f]=v[2];Ba.hash[Ca]=c;sa.push(Ca)}l();u.buffer=Ba;a.Ma=u;return a}function h(a,b,c,d,e,f,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var s=a.length/11,u=s+6,x=r(d[n],v,f),t=q(x,e,k);if(1<t[1].length){for(var x=t[0],w=t[2],y=0,t=t[1].length;y<t;y+=1){if(0<y){var R=x[2*y]-x[2*y-2],T=x[2*y+1]-x[2*y-1];a.Oc+=Math.sqrt(R*R+T*T)*(h?l:1)}var R=x[2*y],T=x[2*y+1],S=w[y][0],Z=w[y][1],U,W;y===t-1?(U=x[2*t-2],W=x[2*t-1]):(U=x[2*y+2],W=x[2*y+3]);var Y,X;0===y?(Y=R,X=T):(Y=x[2*y-2],X=x[2*y-1]);if(0!==y){var aa= y===t-1?0:-1;a.push(R,T,S,Z,1,Y,X,aa,U,W,a.Oc);a.push(R,T,S,Z,-1,Y,X,aa,U,W,a.Oc)}else a.push(R,T,S,Z,0,Y,X,0,U,W,a.Oc),a.push(R,T,S,Z,1,Y,X,0,U,W,a.Oc),a.push(R,T,S,Z,1,Y,X,1,U,W,a.Oc),a.push(R,T,S,Z,0,Y,X,1,U,W,a.Oc),a.push(R,T,S,Z,-1,Y,X,1,U,W,a.Oc),a.push(R,T,S,Z,-1,Y,X,0,U,W,a.Oc),m&&(b.push(s+2,s+0,s+3),b.push(s+2,s+1,s+0),b.push(s+3,s+0,s+4),b.push(s+4,s+0,s+5));y!==t-1?(aa=0===y?0:1,a.push(R,T,S,Z,1,Y,X,aa,U,W,a.Oc),a.push(R,T,S,Z,-1,Y,X,aa,U,W,a.Oc)):(a.push(R,T,S,Z,0,Y,X,0,U,W,a.Oc),a.push(R, T,S,Z,1,Y,X,0,U,W,a.Oc),a.push(R,T,S,Z,1,Y,X,-1,U,W,a.Oc),a.push(R,T,S,Z,0,Y,X,-1,U,W,a.Oc),a.push(R,T,S,Z,-1,Y,X,-1,U,W,a.Oc),a.push(R,T,S,Z,-1,Y,X,0,U,W,a.Oc));y!==t-1?(b.push(u+4*y,u+4*y+3,u+4*y+1),b.push(u+4*y,u+4*y+2,u+4*y+3)):m&&(R=u+4*(t-1),b.push(R+1,R+2,R+0),b.push(R+2,R+3,R+0),b.push(R+0,R+4,R+5),b.push(R+0,R+3,R+4))}c.push(w)}}}function k(a,b,c,d,e){for(var f=[],h=0,k=c.length;h<k;h+=1){var l=[],m=[],n=r(c[h]),p=q(n,d,e);f.push(p[2]);if(1<p[1].length){var s=p[1].length;p[1].forEach(function(a, b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===s-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=s-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function l(a,b,c,d,e,f,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=q(r(d[l],v,f),e,h);if(2<p[1].length&&(n=u.Lh(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]), k)))for(var n=0,s=p[2].length;n<s;n+=1){var x=p[2][n][0]/512,t=p[2][n][1]/512;1==e.x%2&&(x+=0.5);1==e.y%2&&(t+=0.5);k.push(x,t)}}}function m(a,b,c,d){function e(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}var f=a.Ma,h=[],k=[],m=[],s=[];n(a,k,m,c);for(var r=[[[0,0],[255,0],[255,255],[0,255]]],v=[[0,0],[255,0],[0,255],[255,255]],q=a.tg,u=0,x=v.length;u<x;u+=1){var t=v[u][0]/512,w=v[u][1]/512;1==q.x%2&&(t+=0.5);1==q.y%2&&(w+=0.5);s.push(t,w)}h.push([k,m,p("ff"+a.Ex.substr(1)),"regions:land", r,s]);f.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});v=1;for(q=f.length;v<q;v+=1)u=f[v],k=[],m=[],r=[],s=[],x=p(u[1].split("&")[0]),l(k,m,r,u[0],a.tg,b,c,s),k=[k,m,x,u[3],null,s],d&&(k[4]=r),h.push(k);b={To:[],le:[],Y:[],Vb:[],kk:[]};f=d=c=0;for(r=h.length;f<r;f++)k=h[f],b.Y.push.apply(b.Y,k[0]),b.Vb.push.apply(b.Vb,e(k[1],c)),b.kk.push.apply(b.kk,k[5]),b.le.push([k[2],k[3]]),b.To.push([k[1].length,2*d]),d+=k[1].length,c+=k[0].length/2,delete k[0], delete k[1],delete k[5];b.Y=new Float32Array(b.Y);b.Vb=new Uint16Array(b.Vb);b.kk=new Float32Array(b.kk);h.buffer=b;a.Ma=h;return a}function n(a,b,c,d){var e=a.tg;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var f=256*d;d=a+f;b.push(d,e);e+=f;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function p(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function q(a,b,c,d){var e=0,f=0,e=256*b.x,f=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l< m;l+=2){var n=(e+a[l])*c-215440491,p=(f+a[l+1])*c-106744817,s=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[s-2]||p!==k[s-1])n===k[s-2]&&n===k[s-4]?(k[s-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[s-1]&&p===k[s-3]?(k[s-2]=n,b[b.length-1][0]=n,h[b.length-1][0]=a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]))}return[k,b,h]}function r(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,f; "v5"<b?(e=d.length,f=512):(e=27,d=d.substr(0,27),f=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-f,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}function s(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b[c])}var u=null,v=1,x,t=!1,w=null,y=!0;return{parseDataToWebGL:function(d,e){function h(a,b){var c=[];if("road"===b){if(a.Ma&&a.Ma.buffer)for(var d=a.Ma.buffer,e=0,f=d.Y.length;e<f;e++)c.push(d.Y[e].buffer,d.Vb[e].buffer)}else if("region"===b)a.Ma&& a.Ma.buffer&&(d=a.Ma.buffer,c.push(d.Vb.buffer,d.kk.buffer,d.Y.buffer));else if("building"===b&&a.Ma)for(d=0,e=a.Ma.length;d<e;d++)f=a.Ma[d],c.push(f[0].buffer,f[1].buffer),f[2].byteLength&&c.push(f[2].buffer);c.length&&this.Ut(c)}function k(a){var b=a.Ma;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b[b.length-1],d=s[c];b[1]=d.browserStyle[d.levelStyleMapping[n]];"road"===a.vd&&(b[1]=b[1][0],b[4]=d,b[4].id=c)}})}u=this.Lh?this:g.zc;v=d.Se;t=d.FR;x=d.mode;y=d.Vf;var l= t?b:c,n=d.Ey,p=d.gq,s=null;w=d.or;var r=d.Z,q=[],O=Math.pow(2,20-n),K=!!d.od;void 0!==d.Bx&&(s=d.Je[d.Bx].stylemaps);for(var D=0,Q=d.Ic.length;D<Q;D+=1){var P=d.Ic[D],J=P.vd,N=null;k(P);switch(J){case "region":N=m(P,n,O,K);break;case "road":N=f(P,n,p,O,d.e7,K);break;case "building":N=l(P,n,p,r,O,d.bP,d.ry)}a&&h.call(self.Ut?self:this,N,J);N&&q.push(N)}delete d.Je;d.Ic=q;e(null,{data:d})},Ota:function(a,b){u=this.Lh?this:g.zc;for(var c=a.Ic,d=Math.pow(2,20-a.Ed),f=[],h=0,k=c.length;h<k;h++)f.push(e(c[h], d));a.Ic=f;b(null,{data:a})},j6:function(a,b){u=this.Lh?this:g.zc;for(var c=a.jv,d=0;d<c.length;d+=1){for(var e=[],f=0;f<c[d].length;f+=1)e.push(c[d][f][0],c[d][f][1]);c[d]=e}var h,d=[],e=[];a:{for(var k={x:0,y:0},l,m=[],n=[],f=[],p=0;p<c.length;p+=1){var r=q(c[p],k,1);if(0==p){if(3>r[1].length)break a;l=r[1];h=r[0]}else 2<r[1].length&&(m.push(r[1]),n.push(r[2]),f.push(r[0]))}c=u.Lh(l,m,0);if(c.length)for(s(e,c),s(d,h),p=0;p<f.length;p+=1)s(d,f[p])}h=[new Float32Array(d),65535<d.length/2?new Uint32Array(e): new Uint16Array(e),{},[]];b(null,{data:h})},d6:function(a,b){u=this.Lh?this:g.zc;var c=a.ib,d=a.al,e=0,f=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=f,0<l&&k.push(0,l,l+1),59==l&&k.push(0,l+1,1);b(null,{data:[h,k]})},LEa:function(){}}},g.zc&&(g.zc.jf(null,g.FE),g.zc.jf(null,g.TK),g.zc.jf(null,g.g9)));(function(){function a(){function a(b,c,d,e,f,k){var l=[0,0,0,0,0],m=d.slice(0,4).concat(l),r=[],q=Math.PI/180*6,B=void 0,G=void 0,B=d.slice(0,2),H=n(e),I=n(f),G=s.normalize((new h(H)).rg(new h(B))),M=s.normalize((new h(I)).rg(new h(B)));s.KR(G,k)?(B=s.II(G),G=s.II(M)):(B=s.II(M),G=s.II(G),k=[I,H],H=k[0],I=k[1],f=[f,e],e=f[0],f=f[1]);H=Math.ceil(Math.abs(G-B)/q);30<=H&&(H=60-H);for(k=0;k<H;k++)0===k?(m.push.apply(m,e.slice(0,4)),m.push.apply(m,l)):(I=(k*q+B)%(2*Math.PI),m.push.apply(m,d.slice(0,2).concat([0, 0])),m.push(1*Math.cos(I),1*Math.sin(I),0,0,0)),0<k&&r.push(0,k,k+1);m.push.apply(m,f.slice(0,4));m.push.apply(m,l);r.push(0,H,H+1);var L=b.length/p;b.push.apply(b,m);c.push.apply(c,r.map(function(a){return a+L}));return m.length/p}function c(c,d,e,f,k,l){function r(a,b,c,d,e){var f=void 0;a.QH(b)||s.x4(a,b)?f=b:c&&d&&e?f=a:c&&!d&&e?f=b:c||d||e?c||!d||e?(f=s.normalize(a.Zj(b)),H=s.cos(f,a),f=f.Fr(H)):f=a:f=b;return f}function q(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(G, 0,0),l.push(a[2]);if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(G,0,0),l.push(a[2])}function F(a,b){var c=a*p,e=c+p,f=e+p,k=f+p,l=m;I?(f=n(d.slice(e,f)),c=n(d.slice(c,e)),c=s.normalize((new h(f)).rg(new h(c))),c=Math.abs(s.cos(b,c)/s.sin(b,c)*2),d[e+l]=-c,d[k+l]=c):(k=n(d.slice(c,e)),e=n(d.slice(e,f)),e=s.normalize((new h(k)).rg(new h(e))),e=Math.abs(s.cos(e,b)/s.sin(e,b)*2),d[c+l]=-e,d[f+l]=e)}var A=c.length,B=0,G=0,H=void 0,I=void 0;k&&(f="bevel");for(var M=0,L=c.length;M< L;M+=1){var O=c[M-1],K=c[M],D=c[M+1],Q=void 0;O&&(G+=s.Od(K,O));if(0===M||M===A-1)0===M?(void 0===D&&(D=K),O=K,Q=s.normalize(new h(D[0]-K[0],D[1]-K[1])),e.push(0,1,2)):(D=K,Q=s.normalize(new h(K[0]-O[0],K[1]-O[1])),D=d.length/p+2,4===D?e.push(3,2,1):e.push(D-3-B,D-1,D-2)),q(K,Q);else{var P=s.normalize(new h(K[0]-O[0],K[1]-O[1])),J=s.normalize(new h(D[0]-K[0],D[1]-K[1])),N=s.normalize(P.multiply(-1).Zj(J)),I=s.KR(N,P),H=s.cos(N,P);q(K,r(P,J,I,!0,!0),!0);q(K,r(P,J,I,!0,!1),!1);q(K,r(P,J,I,!1,!0),!0); q(K,r(P,J,I,!1,!1),!1);D=d.length/p;Q=D-4;O=Q+2;F(Q,P);s.x4(P,J)?e.push(Q,Q+1,Q-2-B):e.push(Q,Q-1-B,Q+1);"miter"==f&&(I?q(K,r(P,J,0,!0,!0),!0):q(K,r(P,J,0,!0,!0),!1),B=1);if("round"===f){J=P=B=void 0;I?(B=d.slice((Q+1)*p,(Q+2)*p),P=d.slice(Q*p,(Q+1)*p),J=d.slice(O*p,(O+1)*p)):(B=d.slice(Q*p,(Q+1)*p),P=d.slice((Q+1)*p,(Q+2)*p),J=d.slice((O+1)*p,(O+2)*p));B=a(d,e,B,P,J,N.multiply(-1));if(l)for(;0<B--;)l.push(K[2]);B=d.length/p-D}e.push(O,O+1,O+2+B);k||"bevel"!=f&&"miter"!=f||(I?e.push(O,Q,Q+1):e.push(O, O-1,O+1),"miter"==f&&(I?e.push(O+2,O-2,O):e.push(O+2,O+1,O-1)))}}}function d(a,b,c,d){function e(a,b){var c=void 0;if(a.QH(b))c=b;else{var c=s.normalize(a.Zj(b)),d=s.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.Fr(d)}return c}function f(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(n,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(n,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],n=0,r=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(), l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var q=a.length;a.forEach(function(a,d,k){var l=k[d-1];k=k[d+1];var u=void 0;l&&(n+=s.Od(a,l));if(0===d||d===q-1)0===d?(u=s.normalize(new h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(u=s.normalize(new h(a[0]-l[0],a[1]-l[1])),d=b.length/p+2,c.push(d-3,d-1,d-2)),f(a,u);else{d=s.normalize(new h(a[0]-l[0],a[1]-l[1]));k=s.normalize(new h(k[0]-a[0],k[1]-a[1]));l=s.normalize(d.multiply(-1).Zj(k));r=s.KR(l,d);f(a,e(d,k),!0);f(a,e(d,k),!1);f(a,e(d,k),!0);f(a,e(d, k),!1);a=b.length/p-4;k=a+2;var u=a*p,t=u+p,E=t+p,C=E+p;d=Math.abs(s.cos(d,l)/s.sin(d,l));l=m;r?(b[u+l]=d,b[t+l]=-d,b[E+l]=-d,b[C+l]=d):(b[u+l]=-d,b[t+l]=d,b[E+l]=d,b[C+l]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function f(a,b){if(r)for(;0<a--;)r.push(b)}function m(a,b){A.push.apply(A,a.slice(0,k));A.push(b.x,b.y);A.push.apply(A,a.slice(l));A.push.apply(A,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",r=arguments[4],q=c.length-1,F=d.length,A=[],B=[],G= [d.slice(0,p),d.slice(p,2*p)],H=[d.slice(F-p,F),d.slice(F-2*p,F-p)];"square"===n?(n=s.normalize((new h(c[0])).rg(new h(c[1]))),m(G[0],n),m(G[1],n),n=s.normalize((new h(c[q])).rg(new h(c[q-1]))),m(H[0],n),m(H[1],n),B.push(0,2,3,3,1,0),B.push(6,7,4,4,7,5),r&&(r.push(c[0][2]),r.push(c[q][2]))):"round"===n&&(n=G[0].slice(0,2).concat(0,0,0,0).concat(G[0].slice(l)),G=a(d,e,n,G[0],G[1],s.normalize((new h(c[0])).rg(new h(c[1])))),f(G,c[0][2]),n=H[0].slice(0,2).concat(0,0,0,0).concat(H[0].slice(l)),G=a(d, e,n,H[0],H[1],s.normalize((new h(c[q])).rg(new h(c[q-1])))),f(G,c[q][2]));d.push.apply(d,A);e.push.apply(e,B.map(function(a){return a+F/p}))}function f(a,b){var c=[];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=r[0],e-=r[1]);var f=c.length-1;if(-1===f)c.push([d,e,a]);else if(d!==c[f][0]||e!==c[f][1]||a!==c[f][2])if(1<=f){var k=s.normalize(new h(d-c[f][0],e-c[f][1])),l=s.normalize(new h(c[f][0]-c[f-1][0],c[f][1]-c[f-1][1]));k.QH(l)&&a===c[f][2]?c[f]=[d,e,a]:c.push([d,e,a])}else c.push([d, e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);this.x=a;this.y=b}var k,l,m;function n(a){return[a[0]+q*a[2],a[1]+q*a[3]]}var p=9,q=1;k=4;l=6;m=7;var r=[215440491,106744817],s={normalize:function(a){var b=this.length(a);return a.Fr(b)},vf:function(a,b){return a.multiply(b)},zr:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.zr(a,b)/(this.length(a)*this.length(b))},cos:function(a, b){return this.vf(a,b)/(this.length(a)*this.length(b))},KR:function(a,b){return 0<this.zr(a,b)},Od:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},x4:function(a,b){return a.multiply(-1).QH(b)},II:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}};h.prototype={Zj:function(a){return new h(this.x+a.x,this.y+a.y)},rg:function(a){return new h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?new h(this.x*a,this.y*a):this.x*a.x+this.y*a.y}, Fr:function(a){return new h(this.x/a,this.y/a)},QH:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,k=a.lineCap,k=void 0===k?"butt":k,l=a.Zqa,l=void 0===l?!1:l,m=a.wy,n=void 0===m?!1:m,s=a.Y5,m=a.Zwa,r=void 0===m?!0:m,m=a.Qqa,q=[],B=[],G=f(a.jv,void 0===s?!0:s),s=[];l?(d(G,q,B,s),h=q.length,[0,1,2,h/p-1,h/p-2].forEach(function(a){q[a*p+8]=-1})):(c(G,q,B,h,n,s),e(G,q,B,k,s));r&&(q=new Float32Array(q),B=65535<q.length/9?new Uint32Array(B): new Uint16Array(B));h=[q,B];m&&h.push(s);if(b)b(null,{data:h});else return h}}}g.PU=a();g.iya=new g.bA(a,{lazy:"untilCall"})})();g.om={Hqa:function(a,b,c){b=g.om.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.pa=b;return!0},createProgram:function(a,b,c){b=g.om.d5(a,a.VERTEX_SHADER,b);c=g.om.d5(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.bindAttribLocation(d,0,"a_Position");a.linkProgram(d);var e=a.getProgramParameter(d,a.LINK_STATUS);a.deleteShader(c);a.deleteShader(b);return e?d:(console.log("Failed to link program: "+ a.getProgramInfoLog(d)),a.deleteProgram(d),null)},d5:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)},qf:function(a,b,c,d){var e=d;"number"!==typeof d&&(e=d.toString());if(c.x0!==e){var f="uniform"+b;if(2===b.length)a[f].apply(a,[c].concat(d));else a[f](c,d);c.x0=e}},aC:function(a){a.length|| (a=[a]);for(var b=0,c=a.length;b<c;b++)delete a[b].x0}};g.N.Ne.md=g.N.Vd.Gi.extend({ja:[g.ww],r:function(a,b){this.Vi=20;this.Za=Math.min(2,window.devicePixelRatio||1);this.Yp=1;arguments.callee.ka.apply(this,arguments);this.W("mapStyle",a.e);this.W("style",a.e);this.mj=this.pi=!0;a.e.D.Qp&&this.RB(a,b);this.Cn=0;this.Bk={};this.HI()||this.set("reload")},hv:function(){this.ta.forEach(function(a){this.Of(a)},this);this.ga.deleteProgram(this.ga.pa);this.ga=null;for(var a in this)this.hasOwnProperty(a)&&g.a.pwa(a,"u_")&&delete this[a];arguments.callee.ka.apply(this, arguments)},Of:function(a){if(a.qa){if(a.qa.region&&a.qa.region.length){for(var b=a.qa.region.buffer,c=0,d=a.qa.region.length;c<d;c+=1){var e=a.qa.region[c];e[2]=null;e[4]=null}if(b){this.ga.deleteBuffer(b.Y);this.ga.deleteBuffer(b.Vb);for(var f in b)b.hasOwnProperty(f)&&(b[f]=null);a.qa.region.buffer=null}delete a.qa.region}if(a.qa.road){for(c in a.qa.road)if(a.qa.road.hasOwnProperty(c))if("buffer"!==c)delete a.qa.road[c];else if(b=a.qa.road.buffer){if(b.Y&&b.Y.length)for(d=0,e=b.Y.length;d<e;d++)this.ga.deleteBuffer(b.Y[d]), this.ga.deleteBuffer(b.Vb[d]);for(f in b)b.hasOwnProperty(f)&&(b[f]=null);a.qa.road.buffer=null}delete a.qa.road}if(a.qa.building){c=0;for(d=a.qa.building.length;c<d;c+=1)e=a.qa.building[c],this.ga.deleteBuffer(e[0]),e[0]=null,e[1]&&this.ga.deleteBuffer(e[1]),e[1]=null,this.ga.deleteBuffer(e[2]),e[2]=null,e[3]=null,e[4]=null,e[5]=null;delete a.qa.building}delete a.qa}},caa:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", R9:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.h&&(this.h.Ja=!1);this.ta.clear();this.Qa&&this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);this.set("display")},Ry:function(a){if(this.h&&a.VR===this.h.dc)for(var b=0,c=a.Ic.length;b<c;b+=1)this.sD(a.Ic[b],a.Ey,a.gq,a.Z)},fT:function(a,b){for(var c=this.ga,d=a.buffer,e=0,f=a.length;e<f;e+=1){var h=a[e];this.e.gm&&h[3]&&!this.e.od&&(h[2]=this.J.Or(h[2],h[3],!1,b),d.le[e][0]=h[2])}d.Y=this.Hd(c.ARRAY_BUFFER,d.Y);d.Vb=this.Hd(c.ELEMENT_ARRAY_BUFFER,d.Vb)},AT:function(a, b){for(var c=this.ga,d=a.buffer,e=0,f=a.buffer.Y.length;e<f;e++)d.Y[e]=this.Hd(c.ARRAY_BUFFER,d.Y[e]),d.Vb[e]=this.Hd(c.ELEMENT_ARRAY_BUFFER,d.Vb[e]);if(this.e.gm&&!this.e.od){var c=d.hash,d=null,h;for(h in c)if(c.hasOwnProperty(h))for(e=0,f=a[h].length;e<f;e++)d=a[h][e],d[10]&&(d[1]=this.J.Pl(d[1],d[10],1,!1,b),d[4]=this.J.Pl(d[4],d[10],0,!1,b))}},cP:function(a,b){for(var c=0,d=a.length;c<d;c+=1){var e=a[c];e.gD=e[0].length/3;e[0]=this.Hd(this.ga.ARRAY_BUFFER,e[0]);e.fJ=e[1].length/3;e[1]=this.Hd(this.ga.ARRAY_BUFFER, e[1]);e.hD=e[2].length/3;e[2]=this.Hd(this.ga.ARRAY_BUFFER,e[2]);if(this.e.gm&&e[3][2]&&!this.e.od){var f=this.J.gy(e[3][0],e[3][1],e[3][2],!1,b);e[3][0]=f[0];e[3][1]=f[1]}}},Hd:function(a,b){if(b.length){var c=this.ga,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},sD:function(a){var b=a.vd,c=this.ta.get(a.Ai);if(c){var d=a.tg.z;c.qa[b]=a.Ma;"region"===b?this.fT(a.Ma,d):"road"===b?this.AT(a.Ma,d):"building"===b&&(this.cP(a.Ma,d),a.dn&&a.dn.length&&!c.ae&&(c.ae={}, c.ae.ff=a.dn,g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:c})));b===this.h.ha[this.h.ha.length-1]&&(c.xa=!0,this.set("display"))}},Md:function(){if(this.ig&&!this.h.Ja){var a=this.h;this.e.ZC||g.oe.$e.end({key:"rb",index:2,id:this.e.D.id});a.Ja=!0;a.Dd?a.na("renderComplete"):(a.Dd=!0,a.na("complete"))}},kc:function(a,b){!window.ta&&this.ta&&(window.ta=this.ta);this.Zs=a.Zs;this.Ho(a,b);this.Md();a.AI||(a.Tka=this.ig,this.$y(a,b),this.as=this.nb,this.he&&this.set("display",0))},hj:function(){return this.Qa}, nD:function(){g.N.Ne.md.yr+=1;this.Qa&&g.F.G(this.Qa,"webglcontextlost",this.nD,this);this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);if(1<g.N.Ne.md.yr)this.rJ();else{var a=this.Qa.className;this.Qa=document.createElement("canvas");this.Qa.className=a;this.HI()}this.set("reload");new g.fb.vb(g.A.Cc+"://webapi.amap.com/count?"+["type=glfail","c="+g.N.Ne.md.yr,"crd="+g.l.bR,"k="+g.A.key,"u="+g.A.Wt,"m="+(g.l.Z?1:0),"pf="+g.l.Uy,"dpr="+window.devicePixelRatio,"scale="+(g.l.IK||0),"detect="+ g.l.ia].join("&"))},rJ:function(){g.l.xf=!1;this.h&&this.h.e.D&&(this.h.e.set("baseRender",g.l.du?"dv":"d"),this.h.e.D.eS(),this.h.N=null,this.h.U.ys(),this.h=null);this.Qa=this.J=null},Gg:function(a){this.Qa=document.createElement("canvas");this.Qa.className=a||"amap-layer"},HI:function(){if(1<g.N.Ne.md.yr)return this.rJ(),!1;var a=this.ga=this.Qa.getContext(g.l.e9,g.l.f9);if(a)g.F.g(this.Qa,"webglcontextlost",this.nD,this);else return this.rJ(),!1;g.om.Hqa(a,this.caa,this.R9);this.BU=a.getUniformLocation(a.pa, "u_xDelta");this.O8=a.getUniformLocation(a.pa,"u_othMatrix");this.S8=a.getUniformLocation(a.pa,"u_zoomMatrix");this.M8=a.getUniformLocation(a.pa,"u_modelMatrix");this.Ld=a.getAttribLocation(a.pa,"a_Position");this.Ui=a.getAttribLocation(a.pa,"a_op");this.Ti=a.getAttribLocation(a.pa,"a_Previous");this.Ag=a.getAttribLocation(a.pa,"a_Next");this.wx=a.getAttribLocation(a.pa,"a_Tags");a.enableVertexAttribArray(this.Ld);this.tj=a.getUniformLocation(a.pa,"u_FragColor");this.tz=a.getUniformLocation(a.pa, "u_FragColor2");this.hk=a.getUniformLocation(a.pa,"u_type");this.Pv=a.getUniformLocation(a.pa,"u_width");this.rU=a.getUniformLocation(a.pa,"u_isDash");this.tU=a.getUniformLocation(a.pa,"u_onlyBorder");this.oU=a.getUniformLocation(a.pa,"u_dash");this.yU=a.getUniformLocation(a.pa,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0); this.vS=this.GP=this.wy=void 0;this.Hz=0;return!0},sv:function(a){var b=Math.pow(2,a.R.zoom-this.nf),c=a.R.nb.$a(this.as).dd(this.cm);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.nb=a.R.nb},$y:function(a,b){var c=this.TO(a,b),d=this.ga,e=this.J.pe;"function"===typeof e&&e(a.R.zoom);d.clear(d.COLOR_BUFFER_BIT);var e=this.h.ia?this.Za:this.Yp,f=0,h=0;0!==a.R.rotation?(f=2*Math.floor(a.R.Ga.tc.x)*e,h=2*Math.floor(a.R.Ga.tc.y)*e):(f=a.size.width*e,h=a.size.height* e);f&&h&&(this.Qa.width=f,this.Qa.height=h,d.viewport(0,0,this.Qa.width,this.Qa.height),this.zs.apply(this,c),this.De(a))},oq:256*Math.pow(2,20),SP:function(a,b){g.om.aC([this.tj]);for(var c=this.J.ii,d=0,e=b.length;d<e;d++){var f=b[d],h=f.Sb?f.Sb.qa:f.qa;if(!h)break;if((h=h.region)&&h.length){this.rr(f.Vm*this.oq);f=h.buffer;a.bindBuffer(a.ARRAY_BUFFER,f.Y);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.Vb);for(var k=0,l=f.To.length;k<l;k++){var m=f.le[k],n=m[0];(m=m[1])&&c&&(n=this.J.Or(n,m),h[k].yd=n); n&&(a.vertexAttribPointer(this.Ld,2,a.FLOAT,!1,8,0),a.uniform4f(this.tj,n[0],n[1],n[2],n[3]),a.drawElements(a.TRIANGLES,f.To[k][0],a.UNSIGNED_SHORT,f.To[k][1]))}}}},TP:function(a,b){var c=g.om,d=this.h.ia?this.Za:this.Yp,e=this.J.ii;c.aC([this.tj,this.hk,this.Pv]);for(var f={},h=0,k=b.length;h<k;h++){var l=b[h];if(l=(l.Sb?l.Sb.qa:l.qa).road){var l=l.buffer.hash,m;for(m in l)l.hasOwnProperty(m)&&(f[m]?f[m].push(h):f[m]=[h])}}for(var n in f)if(f.hasOwnProperty(n))for(h=f[n],k=0,m=h.length;k<m;k++){for(var l= b[h[k]],p=(l.Sb?l.Sb.qa:l.qa).road,q=p.buffer,r=q.hash[n],p=p[n],s=!1,u=0,v=p.length;u<v;u++){var x=p[u],t=x,w=r[u],y=t[4],E=t[10];E&&e&&(y=this.J.Pl(y,E,0),x.yd=y);x=this.NM(t)[1];if(y&&x){c.qf(a,"1i",this.hk,"square"===t[9]?3:"round"===t[9]?4:2);this.rr(l.Vm*this.oq);if(0===u||s)a.bindBuffer(a.ARRAY_BUFFER,q.Y[w[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,q.Vb[w[0]]),s&&(s=!1);a.vertexAttribPointer(this.Ld,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.Ui,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.Ti, 3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.Ag,3,a.FLOAT,!1,44,32);c.qf(a,"1f",this.Pv,x*d);c.qf(a,"4f",this.tj,y);this.up(t[5]?1:0,t[5],0);a.drawElements(a.TRIANGLES,w[1],a.UNSIGNED_SHORT,w[2])}else 0===u&&1<p.length&&(s=!0)}s=!1;u=0;for(v=p.length;u<v;u++){var w=t=p[u],y=r[u],x=w[1],E=w[10],C=w.rh.rf[0];E&&e&&(x=this.J.Pl(x,E,1),t.yd=x);if(C&&x){c.qf(a,"1i",this.hk,"square"===w[8]?3:"round"===w[8]?4:2);this.rr(l.Vm*this.oq);if(0===u||s)a.bindBuffer(a.ARRAY_BUFFER,q.Y[y[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, q.Vb[y[0]]),s&&(s=!1);a.vertexAttribPointer(this.Ld,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.Ui,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.Ti,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.Ag,3,a.FLOAT,!1,44,32);c.qf(a,"1f",this.Pv,C*d);c.qf(a,"4f",this.tj,x);this.up(w[2]?1:0,w[2],w[6]?1:0);a.drawElements(a.TRIANGLES,y[1],a.UNSIGNED_SHORT,y[2])}else 0===u&&1<p.length&&(s=!0)}}},ac:new g.H(215440491,106744817),zs:function(a,b,c){if(a.length){this.ad+=1;b=this.Qa.width;c=this.Qa.height;var d= this.ga;b=(new g.Ec).KT(-b/2,b/2,c/2,-c/2,0,1);c=Math.pow(2,this.zoom-this.Vi)*(this.h.ia?this.Za:this.Yp);c=(new g.Ec).scale(c,c,1);var e=this.nb.dd(this.S/Math.pow(2,this.Vi-this.zoom)).$a(this.ac),e=(new g.Ec).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.O8,!1,b.elements);d.uniformMatrix4fv(this.S8,!1,c.elements);d.uniformMatrix4fv(this.M8,!1,e.elements);d.uniform1f(this.yU,Math.pow(2,this.zoom-this.Vi)*(this.h.ia?this.Za:1));b=this.sl=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.Ui); d.disableVertexAttribArray(this.Ti);d.disableVertexAttribArray(this.Ag);d.disableVertexAttribArray(this.wx);this.up(0,void 0,void 0);d.uniform1i(this.hk,0);this.rr(0);for(var f=0,h=e.length;f<h;f+=1){var k=e[f];if(k.Sb?k.Sb.qa:k.qa)k.ad=this.ad,b.push(k)}this.SP(d,e);d.enableVertexAttribArray(this.Ui);d.enableVertexAttribArray(this.Ti);d.enableVertexAttribArray(this.Ag);d.disableVertexAttribArray(this.wx);e.length&&this.TP(d,e);if(!(14>this.zoom))for(d.uniform1i(this.hk,1),this.up(0,void 0,void 0), d.disableVertexAttribArray(this.Ui),d.disableVertexAttribArray(this.Ti),d.disableVertexAttribArray(this.Ag),d.enableVertexAttribArray(this.wx),f=0,h=e.length;f<h;f+=1)k=e[f],(k.Sb?k.Sb.qa:k.qa).building&&this.MH(d,k)}}},MH:function(a,b){for(var c=this.J.ii,d=(b.Sb?b.Sb.qa:b.qa).building,e=0;e<d.length;e+=1){var f=d[e],h=f[3][0],k=f[3][1];if(!f||!h)break;var l=f[3][2];l&&c&&(k=this.J.gy(h,k,l),h=k[0],k=k[1],f.yd=h);if(h||k)h||(h=[0,0,0,0]),k||(k=[0,0,0,0]),a.uniform4f(this.tz,h[0],h[1],h[2],h[3]), a.uniform4f(this.tj,k[0],k[1],k[2],k[3]),f.gD&&(a.bindBuffer(a.ARRAY_BUFFER,f[0]),a.vertexAttribPointer(this.Ld,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.wx,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,f.gD)),f.hD&&(a.bindBuffer(a.ARRAY_BUFFER,f[2]),a.vertexAttribPointer(this.Ld,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.wx,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,f.hD)),f.fJ&&(a.bindBuffer(a.ARRAY_BUFFER,f[1]),a.vertexAttribPointer(this.Ld,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.wx, 1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,f.fJ))}},up:function(a,b,c){var d=this.ga;a!==this.wy&&(d.uniform1i(this.rU,a),this.wy=a);a&&b!==this.GP&&(this.GP=b,d.uniform4f(this.oU,b[0],b[1],b[2]||0,b[3]||0));c!==this.vS&&(d.uniform1i(this.tU,c),this.vS=c)},rr:function(a){a!==this.Hz&&(this.ga.uniform1f(this.BU,a),this.Hz=a)},De:function(){this.transform={translate:{x:this.Qa.width/2,y:this.Qa.height/2},scale:this.h.ia?1/this.Za:1/this.Yp,rotate:0}},CO:function(a,b,c){var d=null;if(a.length&&c)d= a[11].id+"-"+c,this.Bk[d]&&(a[0]=this.Bk[d][0],a[3]=this.Bk[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===g.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.Bk[d]&&(this.Bk[d]=[a[0],0,0,a[3]]),a},NM:function(a){var b=this.zoom;if(a.rh&&a.rh.zoom===b)return a.rh.rf;var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.vk(a,18,c,d), c=Math.pow(2,this.zoom-18);a.rh={zoom:b,rf:[e[0]*c,e[3]*c]}}else if(g.a.w4(this.zoom))e=this.vk(a,this.zoom,c,d),a.rh={zoom:b,rf:[e[0],e[3]]};else{var e=this.vk(a,Math.floor(this.zoom),c,d),d=this.vk(a,Math.ceil(this.zoom),c,d),f=function(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return g.a.nc(d,3)},c=f(e[0],d[0],this.zoom),e=f(e[3],d[3],this.zoom);a.rh={zoom:b,rf:[c,e]}}return a.rh.rf},vk:function(a,b,c,d){a=a[11].id+"-"+b;this.Bk[a]|| (this.Bk[a]=this.CO([],c[d[b]]));return this.Bk[a]}});g.N.Ne.md.yr=0;(function(){if(g.zc&&!g.zc.CR){var a=g.a.EC({Je:"anole",Ut:"addTransferList"});g.zc.CR=function(){var b="\\n      let handlers = {}\\n      let transferList = []\\n      let _handlers = [ ("+g.g9+")(true) ]\\n\\n      for (let i = 0, l = _handlers.length; i < l; i++) {\\n        let _handlerObj = _handlers[i]\\n\\n        for (let methodName in _handlerObj) {\\n          if (_handlerObj.hasOwnProperty(methodName)) {\\n            handlers[methodName] = _handlerObj[methodName]    \\n          }\\n        }\\n      }\\n\\n      handlers.anole = "+ JSON.stringify(g.Je)+";\\n\\n      handlers."+a.addTransferList+" = function(transferObjects) {\\n        transferList.push.apply(transferList, transferObjects)\\n      };\\n\\n      self.addEventListener(\'message\', function (e) {\\n        let data = e.data\\n\\n        // console.log(data.cmd, new Date().getTime() - data.ts)\\n\\n        if (data.cmd === \'ping\') {\\n          self.postMessage({\\n            ping: true,\\n            status: 200,\\n            ts: data.ts,\\n            _ts: new Date().getTime()\\n          })\\n\\n          return\\n        }\\n\\n        if (typeof handlers[data.cmd] === \'function\') {\\n\\n          data.args.push(function (err, result) {\\n            self.postMessage({\\n              err,\\n              result,\\n              taskId: data.taskId,\\n              parentTaskId: data.parentTaskId,\\n              ts: data.ts,\\n              _ts: new Date().getTime()\\n            }, transferList)\\n\\n            transferList = []\\n          })\\n\\n          if (handlers.anole) {\\n            data.args[0]."+ a.anole+" = handlers.anole\\n          }\\n        \\n          handlers[data.cmd].apply(handlers, data.args)\\n        }\\n      })\\n    ";if(b=g.a.createObjectURL(b))this.url=b,g.zc.jf(null,{Pla:b},function(){g.zc.zqa()})}}})(); ');_jsload_('sync', '(function(){if(g.A.Gc){var a=function(){var a=g.A.Gc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(g.A.Gc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+g.A.Gc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+g.A.key,"t="+c];c.push("resolution="+ window.innerWidth+"*"+window.innerHeight);c.push("mob="+(g.l.Z?1:0));c.push("vt="+(g.l.du?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+g.l.IK||0);c.push("detect="+g.l.ia);c=g.A.Rd+"/v3/log/init?"+c.join("&");new g.fb.vb(c,{callback:"callback"})})(); ')